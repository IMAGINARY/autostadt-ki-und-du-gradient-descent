!function i(s,a,u){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return c(s[t][1][e]||e)},o,o.exports,i,s,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=e("./game-mode"))&&r.__esModule?r:{default:r};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function l(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(i){return function(){var e,t,n,r=a(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):n}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,u["default"]);var e,t,n,r,o,i,s=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,(t=[{key:"preLoadAssets",value:(i=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=l(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=$(this.game.overlay),n=this.game.config.maxPlayers,this.selectedNumber=1,this.selectorItems={},$('<div class="text text-center numPlayers-title" />').text(IMAGINARY.i18n.t("choose-num-players")).appendTo(t),r=$('<div class="numPlayers-selector" />').addClass("numPlayers-selector-with-".concat(n)).appendTo(t),o=1;o<=n;o+=1)this.selectorItems[o]=$('<div class="item" />').addClass("item-".concat(o)).toggleClass("selected",this.selectedNumber===o).text(o).appendTo(r);case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"handleInput",value:function(e,n){var t=this.game.config.maxPlayers,r=null;e.find(function(e,t){return-1===e.direction&&-1!==n[t].direction})?r=Math.max(1,this.selectedNumber-1):e.find(function(e,t){return 1===e.direction&&1!==n[t].direction})&&(r=Math.min(t,this.selectedNumber+1)),r&&r!==this.selectedNumber&&(this.selectorItems[this.selectedNumber].removeClass("selected"),this.selectorItems[r].addClass("selected"),this.selectedNumber=r),e.find(function(e,t){return e.action&&!n[t].action})&&(this.game.numPlayers=this.selectedNumber,this.triggerEvent("done"))}},{key:"draw",value:function(){}}])&&f(e.prototype,t),n&&f(e,n),a}();n.default=o},{"./game-mode":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=e("./game-mode"))&&r.__esModule?r:{default:r};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function l(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(i){return function(){var e,t,n,r=a(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):n}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,u["default"]);var e,t,n,r,o,i,s=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,(t=[{key:"preLoadAssets",value:(i=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.game.loadSVGSymbol("assets/img/ship.svg");case 2:this.shipSymbol=e.sent;case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=l(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.game,n=t.draw,t.numPlayers,n.line(0,200,1920,200).stroke({color:"#9999ff",width:2}),this.boat=n.use(this.shipSymbol).size(300,200).stroke({color:"#ff0000",width:2}).fill("transparent").center(300,165),window.myBoat=this.boat;case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"handleInput",value:function(){}},{key:"draw",value:function(e,t){var n=this.game;n.draw,n.numPlayers}}])&&f(e.prototype,t),n&&f(e,n),a}();n.default=o},{"./game-mode":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(e("./game-mode")),c=r(e("./wavy-animation"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function f(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){l(r,t,n,o,i,"next",e)}function i(e){l(r,t,n,o,i,"throw",e)}o(void 0)})}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(i){return function(){var e,t,n,r=a(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):n}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,u["default"]);var e,t,n,r,o,i,s=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,(t=[{key:"preLoadAssets",value:(i=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.game.loadSVGSymbol("assets/img/descent-logo.svg");case 2:this.logoSprite=e.sent,this.poly=this.logoSprite.findOne("#descent");case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=f(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.game.draw,(n=document.createElement("div")).classList.add("blinking","text","text-center","text-vcenter"),n.textContent=IMAGINARY.i18n.t("press-to-start"),this.game.overlay.append(n),t.use(this.logoSprite).size(1200,400).stroke({color:"#00368a",width:2}).fill("transparent").center(960,432).animate({duration:5e3}).stroke({color:"#34c6ff"}),this.wavyStep=(0,c.default)(this.logoSprite,{duration:3500}),this.animCounter=0;case 9:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"handleInput",value:function(e,n){e.find(function(e,t){return e.action&&!n[t].action})&&this.triggerEvent("done")}},{key:"draw",value:function(e,t){this.wavyStep(e,t)}}])&&p(e.prototype,t),n&&p(e,n),a}();n.default=o},{"./game-mode":4,"./wavy-animation":8}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("events"))&&r.__esModule?r:{default:r};function u(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function c(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.events=new a.default}var e,n,r,o,i,s;return e=t,(n=[{key:"preLoadAssets",value:(s=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})},{key:"handleEnterMode",value:(i=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"handleExitMode",value:(o=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)})},{key:"handleInput",value:function(){}},{key:"draw",value:function(){}},{key:"triggerEvent",value:function(e){this.events.emit(e)}}])&&l(e.prototype,n),r&&l(e,r),t}();n.default=o},{events:9}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(e("./game-mode-play")),c=r(e("./game-mode-title")),l=r(e("./game-mode-numplayers")),f=r(e("./screen-controls"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function h(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){p(r,t,n,o,i,"next",e)}function i(e){p(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=e,this.config=t,this.input=[],this.inputLast=[],this.initInput(),this.isPaused=!1,this.modes={},this.currentMode=null,this.screenControls=null,this.debugControlsPane=null,this.numPlayers=this.config.maxPlayers}var e,t,r,o,i,s,a;return e=n,(t=[{key:"init",value:(a=h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.svgDoc=SVG().addTo(this.container).size(500,500),this.draw=this.svgDoc.nested(),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay"),this.container.append(this.overlay),this.config.useScreenControls&&(this.screenControls=new f.default(this.config.maxPlayers),this.container.appendChild(this.screenControls.element)),this.config.debugControls&&(this.debugControlsPane=document.createElement("div"),this.debugControlsPane.classList.add("debug-pane"),this.debugControlsPane.classList.add("debug-pane-controls"),this.container.appendChild(this.debugControlsPane)),e.next=9,this.registerMode("title",new c.default(this));case 9:return e.next=11,this.registerMode("numplayers",new l.default(this));case 11:return e.next=13,this.registerMode("play",new u.default(this));case 13:if(this.config.continuousGame)return this.transition("play","done","play"),e.next=17,this.setMode("play");e.next=19;break;case 17:e.next=24;break;case 19:return this.transition("title","done",1<this.config.maxPlayers?"numplayers":"play"),this.transition("numplayers","done","play"),this.transition("play","done","title"),e.next=24,this.setMode("title");case 24:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"loadSVGSymbol",value:(s=h(regeneratorRuntime.mark(function e(t){var n,r,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(1<i.length&&void 0!==i[1])||i[1],e.next=3,fetch(t);case 3:if((r=e.sent).status<200||300<=r.status)throw new Error("Server returned status ".concat(r.status," (").concat(r.statusText,") loading ").concat(t,"."));e.next=6;break;case 6:return e.t0=this.svgDoc.symbol(),e.next=9,r.text();case 9:return e.t1=e.sent,o=e.t0.svg.call(e.t0,e.t1),n&&o.find("style").forEach(function(e){e.remove()}),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"initInput",value:function(){this.input=Array(this.config.maxPlayers).fill(null).map(function(){return{direction:0,action:!1}})}},{key:"readInput",value:function(){var n=this;this.inputLast=this.input,this.initInput(),this.screenControls&&this.screenControls.getState().forEach(function(e,t){e.left&&(n.input[t].direction=-1),e.right&&(n.input[t].direction=1),n.input[t].action=n.input[t].action||e.action}),this.config.useGamepads&&Array.from(navigator.getGamepads()).forEach(function(e,t){null!==e&&(e.axes[0]<-.5&&(n.input[t].direction=-1),.5<e.axes[0]&&(n.input[t].direction=1),n.input[t].action=n.input[t].action||e.buttons[1].pressed||e.buttons[2].pressed)}),this.debugControlsPane&&(this.debugControlsPane.textContent=this.input.map(function(e,t){return"C".concat(t,": d=").concat(e.direction," a=").concat(e.action?"T":"F")}).join("    "))}},{key:"run",value:function(){var n=this,r=0;window.requestAnimationFrame(function e(t){n.isPaused||(n.readInput(),n.currentMode.handleInput(n.input,n.inputLast),n.currentMode.draw(Math.min(t-r,125),t),r=t,window.requestAnimationFrame(e))})}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused&&(this.isPaused=!1,this.run())}},{key:"registerMode",value:(i=h(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.modes[t]=n,e.next=3,n.preLoadAssets();case 3:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"setMode",value:(o=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pause(),this.currentMode)return e.next=4,this.currentMode.handleExitMode();e.next=4;break;case 4:if(void 0===this.modes[t])throw new Error("Can't change to unknown mode ".concat(t));e.next=6;break;case 6:return this.currentMode=this.modes[t],this.draw.clear(),this.overlay.innerHTML="",e.next=11,this.currentMode.handleEnterMode();case 11:this.resume();case 12:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"transition",value:function(e,t,n,r){var o=this,i=2<arguments.length&&void 0!==n?n:null,s=3<arguments.length&&void 0!==r?r:null;if(void 0===this.modes[e])throw new Error("Can't define transition from unknown game mode '".concat(e,"'"));if(i&&void 0===this.modes[i])throw new Error("Can't define transition to unknown game mode '".concat(i,"'"));this.modes[e].events.on(t,function(){if(o.currentMode!==o.modes[e])throw new Error("Mode ".concat(e," triggered the event ").concat(t," while not active. Something was not cleaned up?"));null!==i&&o.setMode(i),s&&"function"==typeof s&&s()})}}])&&d(e.prototype,t),r&&d(e,r),n}();n.default=o},{"./game-mode-numplayers":1,"./game-mode-play":2,"./game-mode-title":3,"./screen-controls":7}],6:[function(e,t,n){"use strict";var r,o=(r=e("./game"))&&r.__esModule?r:{default:r};function u(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function i(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}}var s,a={defaultLanguage:"en",useGamepads:!0,useScreenControls:!0,maxPlayers:2,continuousGame:!1,debugControls:!1};function c(){return l.apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(200<=(n=e.sent).status&&n.status<300)return e.prev=4,e.next=7,n.json();e.next=13;break;case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),new Error("Error parsing config file: ".concat(e.t0.message));case 13:throw new Error("Server returned status ".concat(n.status," (").concat(n.statusText,") loading config file."));case 14:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}s=i(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Object,e.t1={},e.t2=a,e.next=6,c("./config.json");case 6:return e.t3=e.sent,t=e.t0.assign.call(e.t0,e.t1,e.t2,e.t3),e.next=10,IMAGINARY.i18n.init({queryStringVariable:"lang",translationsDirectory:"tr",defaultLanguage:t.defaultLanguage||"en"});case 10:return n=new o.default(document.querySelector(".main"),t),e.next=13,n.init();case 13:e.next=18;break;case 15:e.prev=15,e.t4=e.catch(0),console.error(e.t4);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(){s.apply(this,arguments)}()},{"./game":5}],7:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.element=document.createElement("div"),this.element.classList.add("screen-controls"),this.element.classList.add("with-".concat(e,"-controls")),this.state=[];for(var n=0;n<e;n+=1)this.state.push({left:!1,right:!1,action:!1}),this.element.appendChild(this.buildControl(n));this.mousePressedButton=null,window.addEventListener("mouseup",function(){null!==t.mousePressedButton&&(t.state[t.mousePressedButton.id][t.mousePressedButton.name]=!1,t.mousePressedButton.element.classList.remove("active"),t.mousePressedButton=null)})}var e,t,n;return e=r,(t=[{key:"buildControl",value:function(r){var o=this,e=document.createElement("div");e.classList.add("screen-control","screen-control-".concat(r));function t(t){var n=document.createElement("button");function e(e){0<e.targetTouches.length?(o.state[r][t]=!0,n.classList.add("active")):(o.state[r][t]=!1,n.classList.remove("active")),e.preventDefault()}return n.setAttribute("type","button"),n.classList.add(t),n.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchmove",e,{passive:!1}),n.addEventListener("touchend",e,{passive:!1}),n.addEventListener("touchcancel",e,{passive:!1}),n.addEventListener("mousedown",function(){o.state[r][t]=!0,n.classList.add("active"),o.mousePressedButton={id:r,name:t,element:n}}),n}return e.appendChild(t("left")),e.appendChild(t("action")),e.appendChild(t("right")),e}},{key:"getState",value:function(){return this.state}}])&&o(e.prototype,t),n&&o(e,n),r}();n.default=r},{}],8:[function(e,t,n){"use strict";function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},{xAmplitude:50,duration:5e3,cycles:3},t),n=e.find("polygon"),r=n.map(function(e){return e.plot()}),s=Math.max.apply(Math,function(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.flat().map(function(e){return u(e,2)[1]}))),a=0;return function(e,t){if(!(a>i.duration)){a+=e;var o=Math.min(a,i.duration)/i.duration;n.forEach(function(e,t){e.plot(r[t].map(function(e){var t=u(e,2),n=t[0],r=t[1];return[n+Math.sin((r/s+o*i.cycles)*Math.PI*2)*i.xAmplitude*(1-Math.pow(o,2)),r]}))})}}}},{}],9:[function(e,t,n){var u=Object.create||function(e){function t(){}return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,a=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(e){o=!1}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=u(null),e._eventsCount=0),s){if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=l(e))&&0<o&&s.length>o){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=i[t]=n,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=i.call(p,r);return o.listener=n,r.wrapFn=o}function d(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):r.defaultMaxListeners=a,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e,t,n,r){var o,i,s,a,u,c,l="error"===e;if(c=this._events)l=l&&null==c.error;else if(!l)return!1;if(l){if(1<arguments.length&&(o=t),o instanceof Error)throw o;var f=new Error('Unhandled "error" event. ('+o+")");throw f.context=o,f}if(!(i=c[e]))return!1;var p="function"==typeof i;switch(s=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=v(e,r),i=0;i<r;++i)o[i].call(n)}(i,p,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=v(e,o),s=0;s<o;++s)i[s].call(n,r)}(i,p,this,t);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=v(e,i),a=0;a<i;++a)s[a].call(n,r,o)}(i,p,this,t,n);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=v(e,s),u=0;u<s;++u)a[u].call(n,r,o,i)}(i,p,this,t,n,r);break;default:for(a=new Array(s-1),u=1;u<s;u++)a[u-1]=arguments[u];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=v(e,o),s=0;s<o;++s)i[s].apply(n,r)}(i,p,this,a)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=u(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=u(null):delete n[e]),this;if(0===arguments.length){var o,i=s(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}]},{},[6]);
//# sourceMappingURL=bundle.min.js.map
