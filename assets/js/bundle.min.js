!function i(a,s,u){function c(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return c(a[e][1][t]||t)},o,o.exports,i,a,s,u)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.states=Array(t).fill(null).map(function(t){return{left:!1,right:!1,action:!1}}),this.statesModified=!1}var t,n,r;return t=e,(n=[{key:"modifyState",value:function(t,e,n){this.states[t][e]!==n&&(this.states[t][e]=n,this.statesModified=!0)}},{key:"getStates",value:function(){if(this.statesModified){var t=this.states;return this.states=this.states.map(function(t){return Object.assign({},t)}),this.statesModified=!1,t}return this.states}}])&&o(t.prototype,n),r&&o(t,r),e}();n.default=r},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./controls"))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(i){return function(){var t,e,n,r=h(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,i["default"]);var t,e,n,r=f(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t)}return t=o,(e=[{key:"updateState",value:function(){var e=this;this.states=s(this.states),Array.from(navigator.getGamepads()).filter(function(t){return null!==t&&t.index<e.states.length}).forEach(function(t){e.modifyState(t.index,"left",t.axes[0]<-.5),e.modifyState(t.index,"right",.5<t.axes[0]),e.modifyState(t.index,"action",t.buttons[1].pressed||t.buttons[2].pressed)})}},{key:"getStates",value:function(){return this.updateState(),c(h(o.prototype),"getStates",this).call(this)}}])&&u(t.prototype,e),n&&u(t,n),o}();n.default=p},{"./controls":1}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./controls"))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(i){return function(){var t,e,n,r=c(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=c(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l={ArrowLeft:{id:0,prop:"left"},ArrowRight:{id:0,prop:"right"},ArrowDown:{id:0,prop:"action"},KeyA:{id:1,prop:"left"},KeyD:{id:1,prop:"right"},KeyS:{id:1,prop:"action"}},o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,i["default"]);var e=u(o);function o(n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=e.call(this,n);function t(t){var e=l[t.code];e&&e.id<n&&r.modifyState(e.id,e.prop,"keydown"===t.type)}return window.addEventListener("keydown",t),window.addEventListener("keyup",t),r}return o}();n.default=o},{"./controls":1}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./controls"))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(i){return function(){var t,e,n,r=l(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(o,i["default"]);var t,e,n,r=c(o);function o(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).element=document.createElement("div"),e.element.classList.add("screen-controls"),e.element.classList.add("with-".concat(t,"-controls"));for(var n=0;n<e.states.length;++n)e.element.appendChild(e.buildControl(n));return e.mousePressedButton=null,window.addEventListener("mouseup",function(){null!==e.mousePressedButton&&(e.modifyState(e.mousePressedButton.id,e.mousePressedButton.name,!1),e.mousePressedButton.element.classList.remove("active"),e.mousePressedButton=null)}),e}return t=o,(e=[{key:"buildControl",value:function(r){var o=this,t=document.createElement("div");t.classList.add("screen-control","screen-control-".concat(r));function e(e){var n=document.createElement("button");function t(t){0<t.targetTouches.length?(o.modifyState(r,e,!0),n.classList.add("active")):(o.modifyState(r,e,!1),n.classList.remove("active")),t.preventDefault()}return n.setAttribute("type","button"),n.classList.add(e),n.addEventListener("touchstart",t,{passive:!1}),n.addEventListener("touchmove",t,{passive:!1}),n.addEventListener("touchend",t,{passive:!1}),n.addEventListener("touchcancel",t,{passive:!1}),n.addEventListener("mousedown",function(){o.modifyState(r,e,!0),n.classList.add("active"),o.mousePressedButton={id:r,name:e,element:n}}),n}return t.appendChild(e("left")),t.appendChild(e("action")),t.appendChild(e("right")),t}}])&&s(t.prototype,e),n&&s(t,n),o}();n.default=o},{"./controls":1}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=t("./game-mode"))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function l(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){c(r,e,n,o,i,"next",t)}function i(t){c(r,e,n,o,i,"throw",t)}o(void 0)})}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(i){return function(){var t,e,n,r=s(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(s,u["default"]);var t,e,n,r,o,i,a=p(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return t=s,(e=[{key:"preLoadAssets",value:(i=l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=l(regeneratorRuntime.mark(function t(){var e,n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=$(this.game.overlay),n=this.game.config.maxPlayers,this.selectedNumber=1,this.selectorItems={},$('<div class="text text-center numPlayers-title" />').text(IMAGINARY.i18n.t("choose-num-players")).appendTo(e),r=$('<div class="numPlayers-selector" />').addClass("numPlayers-selector-with-".concat(n)).appendTo(e),o=1;o<=n;o+=1)this.selectorItems[o]=$('<div class="item" />').addClass("item-".concat(o)).toggleClass("selected",this.selectedNumber===o).text(o).appendTo(r);case 7:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)})},{key:"handleInputs",value:function(t,n){var e=this.game.config.maxPlayers,r=null;t.find(function(t,e){return-1===t.direction&&-1!==n[e].direction})?r=Math.max(1,this.selectedNumber-1):t.find(function(t,e){return 1===t.direction&&1!==n[e].direction})&&(r=Math.min(e,this.selectedNumber+1)),r&&r!==this.selectedNumber&&(this.selectorItems[this.selectedNumber].removeClass("selected"),this.selectorItems[r].addClass("selected"),this.selectedNumber=r),t.find(function(t,e){return t.action&&!n[e].action})&&(this.game.numPlayers=this.selectedNumber,this.triggerEvent("done"))}},{key:"draw",value:function(){}}])&&f(t.prototype,e),n&&f(t,n),s}();n.default=o},{"./game-mode":8}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(t("./game-mode")),h=r(t("./terrain")),f=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./waves"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function p(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){u(r,e,n,o,i,"next",t)}function i(t){u(r,e,n,o,i,"throw",t)}o(void 0)})}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(i){return function(){var t,e,n,r=c(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=c(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=300,o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,l["default"]);var t,e,n,r,o,i,a,s,u=m(c);function c(e){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),t=u.call(this,e);var n=Array(300).fill(null);return t.wavesPoints=function(t){return f.points(n,t,e.draw.width(),10)},t}return t=c,(e=[{key:"preLoadAssets",value:(s=p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.game.loadSVGSymbol("assets/img/ship.svg");case 2:return this.shipSymbol=t.sent,this.shipSymbol.attr({overflow:"visible"}),t.next=6,this.game.loadSVGSymbol("assets/img/treasure-closed.svg");case 6:return this.treasureClosedSymbol=t.sent,this.treasureClosedSymbol.attr({overflow:"visible"}),t.next=10,this.game.loadSVGSymbol("assets/img/treasure-opened.svg");case 10:this.treasureOpenedSymbol=t.sent,this.treasureOpenedSymbol.attr({overflow:"visible"});case 12:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"handleEnterMode",value:(a=p(regeneratorRuntime.mark(function t(){var e,u,c,l,n,r,o,i,a,f=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.game,u=e.draw,c=e.numPlayers,l=u.group().addClass("play").addClass("draw").translate(0,200),this.players=Array(c).fill(null).map(function(t,e){var n=(e+1)/(c+1),r=l.group();r.addClass("player-".concat(e)).transform({translateX:n*u.width()});var o=r.use(f.shipSymbol).center(0,18),i=r.group(),a=i.group();a.line(0,-u.height(),0,-5),a.circle(10).center(0,0),a.transform({translateY:90});var s=i.rect(40,u.height()).move(-20,18);return i.clipWith(s),{id:e,group:r,boat:o,probe:a,x:n,flipX:!1,probing:!1}}),this.water=l.group().polyline(this.wavesPoints(0)).addClass("water"),this.groundGroup=l.group(),n={marginWidth:.1},r=(0,h.default)(20,300,n),o=r.map(function(t,e){return[u.width()*(e/(r.length-1)),300*t]}),this.terrainHeights=r,this.treasureLocation=this.locateTreasure(),console.log("Treasure location:",this.treasureLocation),i=this.groundGroup.group(),a=i.group().addClass("treasure").transform({translateX:this.treasureLocation.x*u.width(),translateY:v+300*this.treasureLocation.y}),this.treasureClosed=a.use(this.treasureClosedSymbol),this.treasureOpened=a.use(this.treasureOpenedSymbol).hide(),this.ground=this.groundGroup.polyline(o).addClass("ground").translate(0,v).hide(),i.clipWith(this.groundGroup.use(this.ground)),this.groundClip=this.groundGroup.clip(),this.groundGroup.clipWith(this.groundClip),this.tangents=l.group().translate(0,v);case 20:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"handleExitMode",value:(i=p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return i.apply(this,arguments)})},{key:"handleInputs",value:function(t,s,u){var c=this,e=this.game,n=(e.draw,e.numPlayers);t.slice(0,n).forEach(function(t,e){var n=c.players[e];if(!n.probing&&(n.x+=u*t.direction*2e-4,n.x=Math.min(Math.max(.1,n.x),.9),n.flipX=0===t.direction?n.flipX:-1===t.direction,t.action&&!s[e].action)){n.probing=!0;var r=c.terrainHeight(n.x),o=v+300*r,i=500/v*o,a=n.probe.animate(i,0,"now").transform({translateY:o}).after(function(){return c.addGroundClip(n.x)}).after(function(){return c.addTangent(n)});Math.abs(n.x-c.treasureLocation.x)<=.015&&a.after(function(){return c.uncoverGround()}).after(function(){return c.showGameOverSequence(n)});a.animate(i,500).transform({translateY:90}).after(function(){return n.probing=!1});console.log("Player ".concat(e," is probing at:"),{x:n.x,y:r})}})}},{key:"draw",value:function(t,a){var e=this.game,s=e.draw;e.numPlayers;this.water.plot(this.wavesPoints(a)),this.players.forEach(function(t,e){var n=t.x,r=10*f.height(n,a),o=10*f.slope(n,a),i={rotate:45*Math.atan2(o,s.width())/Math.PI};t.flipX&&(i.flip="x"),t.boat.transform(i),t.group.transform({translateX:n*s.width(),translateY:r})})}},{key:"terrainHeight",value:function(t){return this.terrainHeightExt(t).value}},{key:"terrainHeightExt",value:function(t){var e=(this.terrainHeights.length-1)*t,n=Math.floor(e),r=n===this.terrainHeights.length-1?n-1:n,o=r+1,i=this.terrainHeights[r],a=this.terrainHeights[o];return{value:i+(e-r)*(a-i),slope:(a-i)*(this.terrainHeights.length-1)}}},{key:"locateTreasure",value:function(){var t,e=(t=this.terrainHeights,[].reduce.call(t,function(t,e,n,r){return e>r[t]?n:t},0));return{x:e/(this.terrainHeights.length-1),y:this.terrainHeights[e]}}},{key:"addTangent",value:function(t){var e=this.game.draw.width(),n=this.terrainHeightExt(t.x),r=n.value,o=n.slope,i=180*Math.atan2(300*o,e)/Math.PI;this.tangents.line(.02*-e/2,0,.02*e/2,0).addClass("player-".concat(t.id)).transform({translateX:e*t.x,translateY:300*r,rotate:i})}},{key:"addGroundClip",value:function(t){var e=this.game.draw,n=e.width(),r=e.height(),o=this.groundClip.polygon([[-n,-r],[n,-r],[n,r],[-n,r]]).center(e.width()*t,0).transform({scaleX:.001});this.groundClip.add(o)}},{key:"uncoverGround",value:(o=p(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game.draw,this.ground.show(),this.groundClip.circle(.06*e.width()).center(e.width()*this.treasureLocation.x,v+300*this.treasureLocation.y).dy(-.018*e.width()),n=function(e){return new Promise(function(t){e.animate(2e3).ease(function(t){return-(Math.sqrt(1-t*t)-1)}).transform({scaleX:1}).after(t)})},t.abrupt("return",Promise.all(this.groundClip.children().map(n)));case 6:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"showGameOverSequence",value:(r=p(regeneratorRuntime.mark(function t(e){var n,r,o,i,a,s,u,c,l,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.game.draw,r=$(this.game.overlay),o=function(e){return new Promise(function(t){return setTimeout(t,e)})},i=IMAGINARY.i18n.t("treasure-announcement-begin")+(e.id+1)+IMAGINARY.i18n.t("treasure-announcement-end"),a=function(t){return t[Math.floor(Math.random()*(t.length-1))]}(IMAGINARY.i18n.t("treasures")),s=$("<div>").text(i),u=$("<div>").text(a).css("visibility","visible").css("visibility","hidden"),c=$('<div class="ending-sequences-text player-'.concat(e.id,'" />')).append([s,u]),l=100*this.treasureLocation.x,f=100-5e4/n.height(),h=$('<div class="ending-sequences-text-container">').css({left:"".concat(l,"%"),bottom:"".concat(f,"%")}).append(c),t.next=14,o(1e3);case 14:return r.empty().append(h),t.next=17,o(1e3);case 17:u.css("visibility","visible"),this.treasureOpened.show(),this.treasureClosed.hide();case 20:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})}])&&d(t.prototype,e),n&&d(t,n),c}();n.default=o},{"./game-mode":8,"./terrain":11,"./waves":12}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(t("./game-mode")),c=r(t("./wavy-animation"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function f(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){l(r,e,n,o,i,"next",t)}function i(t){l(r,e,n,o,i,"throw",t)}o(void 0)})}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(i){return function(){var t,e,n,r=s(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return e=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(s,u["default"]);var t,e,n,r,o,i,a=d(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return t=s,(e=[{key:"preLoadAssets",value:(i=f(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.game.loadSVGSymbol("assets/img/descent-logo.svg");case 2:this.logoSprite=t.sent,this.poly=this.logoSprite.findOne("#descent");case 4:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=f(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.game.draw,(n=document.createElement("div")).classList.add("blinking","text","text-center","text-vcenter"),n.textContent=IMAGINARY.i18n.t("press-to-start"),this.game.overlay.append(n),e.use(this.logoSprite).size(1200,400).stroke({color:"#00368a",width:2}).fill("transparent").center(960,432).animate({duration:5e3}).stroke({color:"#34c6ff"}),this.wavyStep=(0,c.default)(this.logoSprite,{duration:3500}),this.animCounter=0;case 9:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=f(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)})},{key:"handleInputs",value:function(t,n){t.find(function(t,e){return t.action&&!n[e].action})&&this.triggerEvent("done")}},{key:"draw",value:function(t,e){this.wavyStep(t,e)}}])&&h(t.prototype,e),n&&h(t,n),s}();n.default=o},{"./game-mode":8,"./wavy-animation":13}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=t("events"))&&r.__esModule?r:{default:r};function u(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function c(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){u(r,e,n,o,i,"next",t)}function i(t){u(r,e,n,o,i,"throw",t)}o(void 0)})}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.events=new s.default}var t,n,r,o,i,a;return t=e,(n=[{key:"preLoadAssets",value:(a=c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return a.apply(this,arguments)})},{key:"handleEnterMode",value:(i=c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return i.apply(this,arguments)})},{key:"handleExitMode",value:(o=c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},{key:"handleInputs",value:function(){}},{key:"draw",value:function(){}},{key:"triggerEvent",value:function(t){this.events.emit(t)}}])&&l(t.prototype,n),r&&l(t,r),e}();n.default=o},{events:14}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(t("./game-mode-play")),c=r(t("./game-mode-title")),l=r(t("./game-mode-numplayers")),f=r(t("./controls/gamepad")),h=r(t("./controls/screen")),p=r(t("./controls/keyboard"));function r(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function y(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){d(r,e,n,o,i,"next",t)}function i(t){d(r,e,n,o,i,"throw",t)}o(void 0)})}}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=t,this.config=e,this.inputs=this.createInputs(),this.inputsLast=this.createInputs(),this.gameLoop=null,this.isPaused=!1,this.modes={},this.currentMode=null,this.controls={},this.debugControlsPane=null,this.numPlayers=this.config.maxPlayers}var t,e,r,o,i,a,s;return t=n,(e=[{key:"init",value:(s=y(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.overlay=document.createElement("div"),this.overlay.classList.add("overlay"),(e=document.createElement("div")).classList.add("game-view"),this.container.append(e),this.svgDoc=SVG().addTo(e),this.svgDoc.viewbox(0,0,1920,864).attr("preserveAspectRatio","xMinYMin meet"),this.draw=this.svgDoc.nested().size(1920,864),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay"),this.container.append(this.overlay),this.config.useScreenControls&&(this.controls.screen=new h.default(this.config.maxPlayers),this.container.appendChild(this.controls.screen.element)),this.config.useGamepads&&(this.controls.gamepad=new f.default(this.config.maxPlayers)),this.config.useKeyboardControls&&(this.controls.keyboard=new p.default(this.config.maxPlayers)),this.config.debugControls&&(this.debugControlsPane=document.createElement("div"),this.debugControlsPane.classList.add("debug-pane"),this.debugControlsPane.classList.add("debug-pane-controls"),this.container.appendChild(this.debugControlsPane)),t.next=18,this.registerMode("title",new c.default(this));case 18:return t.next=20,this.registerMode("numplayers",new l.default(this));case 20:return t.next=22,this.registerMode("play",new u.default(this));case 22:if(this.config.continuousGame)return this.transition("play","done","play"),t.next=26,this.setMode("play");t.next=28;break;case 26:t.next=33;break;case 28:return this.transition("title","done",1<this.config.maxPlayers?"numplayers":"play"),this.transition("numplayers","done","play"),this.transition("play","done","title"),t.next=33,this.setMode("title");case 33:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"loadSVGSymbol",value:(a=y(regeneratorRuntime.mark(function t(e){var n,r,o,i=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(1<i.length&&void 0!==i[1])||i[1],t.next=3,fetch(e);case 3:if((r=t.sent).status<200||300<=r.status)throw new Error("Server returned status ".concat(r.status," (").concat(r.statusText,") loading ").concat(e,"."));t.next=6;break;case 6:return t.t0=this.svgDoc.symbol(),t.next=9,r.text();case 9:return t.t1=t.sent,o=t.t0.svg.call(t.t0,t.t1),n&&o.find("style").forEach(function(t){return t.remove()}),t.abrupt("return",o);case 13:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"initInputs",value:function(){this.inputs=this.createInputs()}},{key:"createInputs",value:function(){return Array(this.config.maxPlayers).fill(null).map(function(){return{direction:0,action:!1}})}},{key:"readInputs",value:function(){this.inputsLast=this.inputs;function n(t,e){return{direction:e.right?1:e.left?-1:t.direction,action:e.action||t.action}}var r=Object.values(this.controls).map(function(t){return t.getStates()});this.inputs=this.createInputs().map(function(t,e){return r.map(function(t){return t[e]}).reduce(n,t)}),this.debugControlsPane&&(this.debugControlsPane.textContent=this.inputs.map(function(t,e){return"C".concat(e,": d=").concat(t.direction," a=").concat(t.action?"T":"F")}).join("    "))}},{key:"run",value:function(){var n=this;if(!this.gameLoop){var r=0,o=0;this.gameLoop=function(t){if(!n.isPaused){n.readInputs();var e=(t-=o+=Math.max(0,t-o-r-125))-r;n.currentMode.handleInputs(n.inputs,n.inputsLast,e,t),n.currentMode.draw(e,t),r=t,window.requestAnimationFrame(n.gameLoop)}}}window.requestAnimationFrame(this.gameLoop)}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused&&(this.isPaused=!1,this.run())}},{key:"registerMode",value:(i=y(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.modes[e]=n,t.next=3,n.preLoadAssets();case 3:case"end":return t.stop()}},t,this)})),function(t,e){return i.apply(this,arguments)})},{key:"setMode",value:(o=y(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pause(),this.currentMode)return t.next=4,this.currentMode.handleExitMode();t.next=4;break;case 4:if(void 0===this.modes[e])throw new Error("Can't change to unknown mode ".concat(e));t.next=6;break;case 6:return this.currentMode=this.modes[e],this.draw.clear(),this.overlay.innerHTML="",t.next=11,this.currentMode.handleEnterMode();case 11:this.resume();case 12:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"transition",value:function(t,e,n,r){var o=this,i=2<arguments.length&&void 0!==n?n:null,a=3<arguments.length&&void 0!==r?r:null;if(void 0===this.modes[t])throw new Error("Can't define transition from unknown game mode '".concat(t,"'"));if(i&&void 0===this.modes[i])throw new Error("Can't define transition to unknown game mode '".concat(i,"'"));this.modes[t].events.on(e,function(){if(o.currentMode!==o.modes[t])throw new Error("Mode ".concat(t," triggered the event ").concat(e," while not active. Something was not cleaned up?"));null!==i&&o.setMode(i),a&&"function"==typeof a&&a()})}}])&&m(t.prototype,e),r&&m(t,r),n}();n.default=o},{"./controls/gamepad":2,"./controls/keyboard":3,"./controls/screen":4,"./game-mode-numplayers":5,"./game-mode-play":6,"./game-mode-title":7}],10:[function(t,e,n){"use strict";var r,o=(r=t("./game"))&&r.__esModule?r:{default:r};function u(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function i(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){u(r,e,n,o,i,"next",t)}function i(t){u(r,e,n,o,i,"throw",t)}o(void 0)})}}var a,s={defaultLanguage:"en",useGamepads:!0,useScreenControls:!0,maxPlayers:2,continuousGame:!1,debugControls:!1};function c(){return l.apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(200<=(n=t.sent).status&&n.status<300)return t.prev=4,t.next=7,n.json();t.next=13;break;case 7:return t.abrupt("return",t.sent);case 10:throw t.prev=10,t.t0=t.catch(4),new Error("Error parsing config file: ".concat(t.t0.message));case 13:throw new Error("Server returned status ".concat(n.status," (").concat(n.statusText,") loading config file."));case 14:case"end":return t.stop()}},t,null,[[4,10]])}))).apply(this,arguments)}a=i(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=Object,t.t1={},t.t2=s,t.next=6,c("./config.json");case 6:return t.t3=t.sent,e=t.t0.assign.call(t.t0,t.t1,t.t2,t.t3),t.next=10,IMAGINARY.i18n.init({queryStringVariable:"lang",translationsDirectory:"tr",defaultLanguage:e.defaultLanguage||"en"});case 10:return n=new o.default(document.querySelector(".main"),e),window.game=n,t.next=14,n.init();case 14:t.next=19;break;case 16:t.prev=16,t.t4=t.catch(0),console.error(t.t4);case 19:case"end":return t.stop()}},t,null,[[0,16]])})),function(){a.apply(this,arguments)}()},{"./game":9}],11:[function(t,e,n){"use strict";function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return n=Object.assign({},o,n),function(t,e){for(var n=t[0][0],r=t[t.length-1][0]-n,o=Array(e),i=0,a=0;a<o.length-1;++a){for(;a>=(e-1)*(t[i][0]-n)/r;)++i;var s=(n+a/(e-1)*r-t[i-1][0])/(t[i][0]-t[i-1][0]);o[a]=t[i-1][1]+(t[i][1]-t[i-1][1])*s}return o[o.length-1]=t[t.length-1][1],o}(function t(n,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(0===e)return n;var o=n.length;var i=n.map(function(t,e){return[[.75*t[0]+.25*n[(e+1)%o][0],.75*t[1]+.25*n[(e+1)%o][1]],[.25*t[0]+.75*n[(e+1)%o][0],.25*t[1]+.75*n[(e+1)%o][1]]]}).flat();r&&(--i.length,i[0]=n[0],i[i.length-1]=n[n.length-1]);return t(i,e-1,r)}(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.2,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.25,u=new Float32Array(t),o=[Math.floor(e*t),Math.floor(e+(1-2*e)*t)],i=[[0,Math.random()*n],[o[0],n],[o[0]+1+Math.floor(Math.random()*(o[1]-o[0])),1],[o[1],n],[t-1,Math.random()*n]];0<t&&(i.forEach(function(t){var e=c(t,2),n=e[0],r=e[1];return u[n]=r}),i.reduce(function(t,e){var n=c(t,2),r=n[0],o=n[1],i=c(e,2),a=i[0],s=i[1];return function t(e,n,r){if(0<e.length){var o=(s=e.length,u=n,c=r,{index:Math.floor(s*Math.random()),height:Math.max(u,c)*Math.random()}),i=o.index,a=o.height;e[i]=a,t(e.subarray(0,i),n,a),t(e.subarray(i+1,e.length),a,r)}var s,u,c;return e}(u.subarray(r+1,a),o,s),[a,s]}));return r=Math.max(0,Math.min(r,1)),new Array(u.length).fill(null).map(function(t,e){return[(e+r*(Math.random()-.5))/(u.length-1),u[e]]})}(t,n.marginWidth,n.marginHeight,n.jitter),n.smoothing),e)};var o={marginWidth:.1,marginHeight:.1,jitter:.25,smoothing:6}},{}],12:[function(t,e,n){"use strict";function s(t,e){return e/=500,(Math.sin(100*t+e)+Math.sin(50*t-e)+Math.sin(30*t+2*e)+Math.sin(10*t-3*e))/4}Object.defineProperty(n,"__esModule",{value:!0}),n.height=s,n.slope=function(t,e){return e/=500,(100*Math.cos(100*t+e)+50*Math.cos(50*t-e)+30*Math.cos(30*t+2*e)+10*Math.cos(10*t-3*e))/4},n.heights=function(n,r){return n.forEach(function(t,e){return n[e]=s(e/(n.length-1),r)}),n},n.points=function(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return r.forEach(function(t,e){var n=e/(r.length-1);r[e]=[i*n,a*s(n,o)]}),r}},{}],13:[function(t,e,n){"use strict";function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},{xAmplitude:50,duration:5e3,cycles:3},e),n=t.find("polygon"),r=n.map(function(t){return t.plot()}),a=Math.max.apply(Math,function(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.flat().map(function(t){return u(t,2)[1]}))),s=0;return function(t,e){if(!(s>i.duration)){s+=t;var o=Math.min(s,i.duration)/i.duration;n.forEach(function(t,e){t.plot(r[e].map(function(t){var e=u(t,2),n=e[0],r=e[1];return[n+Math.sin((r/a+o*i.cycles)*Math.PI*2)*i.xAmplitude*(1-Math.pow(o,2)),r]}))})}}}},{}],14:[function(t,e,n){var u=Object.create||function(t){function e(){}return e.prototype=t,new e},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},i=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(t){o=!1}function l(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=u(null),t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=l(t))&&0<o&&a.length>o){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=i[e]=n,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.call(h,r);return o.listener=n,r.wrapFn=o}function d(t,e,n){var r=t._events;if(!r)return[];var o=r[e];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):m(o,o.length):[]}function y(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');s=t}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(t,e,n,r){var o,i,a,s,u,c,l="error"===t;if(c=this._events)l=l&&null==c.error;else if(!l)return!1;if(l){if(1<arguments.length&&(o=e),o instanceof Error)throw o;var f=new Error('Unhandled "error" event. ('+o+")");throw f.context=o,f}if(!(i=c[t]))return!1;var h="function"==typeof i;switch(a=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,o=m(t,r),i=0;i<r;++i)o[i].call(n)}(i,h,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].call(n,r)}(i,h,this,e);break;case 3:!function(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=m(t,i),s=0;s<i;++s)a[s].call(n,r,o)}(i,h,this,e,n);break;case 4:!function(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=m(t,a),u=0;u<a;++u)s[u].call(n,r,o,i)}(i,h,this,e,n,r);break;default:for(s=new Array(a-1),u=1;u<a;u++)s[u-1]=arguments[u];!function(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=m(t,o),a=0;a<o;++a)i[a].apply(n,r)}(i,h,this,s)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return f(this,t,e,!1)},r.prototype.prependListener=function(t,e){return f(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=u(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=u(null):delete n[t]),this;if(0===arguments.length){var o,i=a(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}]},{},[10]);
//# sourceMappingURL=bundle.min.js.map
