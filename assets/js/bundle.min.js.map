{"version":3,"file":"bundle.min.js","sources":["bundle.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameMode = _interopRequireDefault(require(\"./game-mode\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar PlayMode = /*#__PURE__*/function (_GameMode) {\n  _inherits(PlayMode, _GameMode);\n\n  var _super = _createSuper(PlayMode);\n\n  function PlayMode() {\n    _classCallCheck(this, PlayMode);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PlayMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.game.loadSVGSymbol('assets/img/ship.svg').stroke({\n                  color: '#ff0000',\n                  width: 2\n                }).fill('transparent');\n\n              case 2:\n                this.shipSymbol = _context.sent;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var svg;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // Init state (boat positions, etc.)\n                svg = this.game.svg; // Draw sea\n\n                svg.line(0, 200, 1920, 200).stroke({\n                  color: '#9999ff',\n                  width: 2\n                });\n                this.boat = svg.use(this.shipSymbol).size(300, 200).center(300, 165);\n                window.myBoat = this.boat;\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {// Move the boats or check if they're lowering the probe\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ts) {// Move boats\n      // Draw bottom\n      // etc...\n    }\n  }]);\n\n  return PlayMode;\n}(_gameMode[\"default\"]);\n\nexports[\"default\"] = PlayMode;\n\n},{\"./game-mode\":2}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* eslint-disable class-methods-use-this,no-unused-vars,no-empty-function */\n\n/**\n * Abstract class for GameMode\n *\n * A GameMode does the actual handling of the input and drawing\n */\nvar GameMode = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {GradientDescentGame} game\n   */\n  function GameMode(game) {\n    _classCallCheck(this, GameMode);\n\n    // noinspection JSUnusedGlobalSymbols\n    this.game = game;\n  }\n  /**\n   * Preload any external assets that will be needed during the game\n   *\n   * This method runs during game initialization.\n   * @return {Promise<void>}\n   */\n\n\n  _createClass(GameMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n    /**\n     * Called by the game when the mode is entered.\n     *\n     * Can be used to add DOM elements, event handlers and initialize\n     * internal state. Anything done here must be cleaned up in\n     * handleExitMode.\n     */\n\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n    /**\n     * Called by the game when the mode is going to be exited\n     *\n     * Should be used to remove DOM elements, event handlers\n     * or anything else that was created on handleEnterMode.\n     */\n\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n    /**\n     * Called once per frame so the mode can handle controller input\n     *\n     * Current input state and the previous one are passed\n     * to help with state change detection.\n     *\n     * Both are arrays with N objects with shape:\n     * - direction {integer}: Either -1, 0 or 1.\n     * - action {bool}\n     *\n     * @param {[{direction: Number, action: Boolean}]} input\n     * @param {[{direction: Number, action: Boolean}]} lastInput\n     */\n\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {}\n    /**\n     * Called once per frame so the mode can draw based on the game's state\n     *\n     * @param {Number} ts\n     */\n\n  }, {\n    key: \"draw\",\n    value: function draw(ts) {}\n  }]);\n\n  return GameMode;\n}();\n\nexports[\"default\"] = GameMode;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameModePlay = _interopRequireDefault(require(\"./game-mode-play\"));\n\nvar _screenControls = _interopRequireDefault(require(\"./screen-controls\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * The main application\n *\n * This class creates the main UI elements and runs the\n * main game loop (read input, draw).\n *\n * The game can be in one of various modes (see GameMode)\n * which decides how to draw and process input.\n */\nvar GradientDescentGame = /*#__PURE__*/function () {\n  function GradientDescentGame(container, config) {\n    _classCallCheck(this, GradientDescentGame);\n\n    this.container = container;\n    this.config = config;\n    this.input = [];\n    this.inputLast = [];\n    this.initInput();\n    this.isPaused = false;\n    this.modes = {};\n    this.currentMode = null;\n    this.screenControls = null;\n    this.debugControlsPane = null;\n  }\n  /**\n   * Initializes the app and downloads any external assets\n   *\n   * @return {Promise<void>}\n   */\n\n\n  _createClass(GradientDescentGame, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var preloaders;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.svg = SVG().addTo(this.container).size(500, 500);\n\n                if (this.config.useScreenControls) {\n                  this.screenControls = new _screenControls[\"default\"](this.config.maxPlayers);\n                  this.container.appendChild(this.screenControls.element);\n                }\n\n                if (this.config.debugControls) {\n                  this.debugControlsPane = document.createElement('div');\n                  this.debugControlsPane.classList.add('debug-pane');\n                  this.debugControlsPane.classList.add('debug-pane-controls');\n                  this.container.appendChild(this.debugControlsPane);\n                }\n\n                _context2.next = 5;\n                return this.registerMode('play', new _gameModePlay[\"default\"](this));\n\n              case 5:\n                preloaders = Object.entries(this.modes).map( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref) {\n                    var _ref3, mode;\n\n                    return regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _ref3 = _slicedToArray(_ref, 2), mode = _ref3[1];\n                            return _context.abrupt(\"return\", mode.preLoadAssets());\n\n                          case 2:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                _context2.next = 8;\n                return Promise.all(preloaders);\n\n              case 8:\n                _context2.next = 10;\n                return this.setMode('play');\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n    /**\n     * Loads an external SVG file into a symbol within the main svg element\n     *\n     * @param {string} uri\n     * @param {boolean} clearStyles\n     *  If true removes the style elements from the file\n     * @return {Promise<SVG.Symbol>}\n     */\n\n  }, {\n    key: \"loadSVGSymbol\",\n    value: function () {\n      var _loadSVGSymbol = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(uri) {\n        var clearStyles,\n            response,\n            newSymbol,\n            _args3 = arguments;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                clearStyles = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : true;\n                _context3.next = 3;\n                return fetch(uri);\n\n              case 3:\n                response = _context3.sent;\n\n                if (!(response.status < 200 || response.status >= 300)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                throw new Error(\"Server returned status \".concat(response.status, \" (\").concat(response.statusText, \") loading \").concat(uri, \".\"));\n\n              case 6:\n                _context3.t0 = this.svg.symbol();\n                _context3.next = 9;\n                return response.text();\n\n              case 9:\n                _context3.t1 = _context3.sent;\n                newSymbol = _context3.t0.svg.call(_context3.t0, _context3.t1);\n\n                if (clearStyles) {\n                  newSymbol.find('style').forEach(function (s) {\n                    s.remove();\n                  });\n                }\n\n                return _context3.abrupt(\"return\", newSymbol);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadSVGSymbol(_x2) {\n        return _loadSVGSymbol.apply(this, arguments);\n      }\n\n      return loadSVGSymbol;\n    }()\n    /**\n     * Initializes the input state\n     *\n     * @private\n     */\n\n  }, {\n    key: \"initInput\",\n    value: function initInput() {\n      this.input = Array(this.config.maxPlayers).fill(null).map(function () {\n        return {\n          direction: 0,\n          action: false\n        };\n      });\n    }\n    /**\n     * Reads the input state from all enabled controller types\n     *\n     * Loads the new input state in this.input and the previous\n     * state in this.inputLast.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"readInput\",\n    value: function readInput() {\n      var _this = this;\n\n      this.inputLast = this.input;\n      this.initInput();\n\n      if (this.screenControls) {\n        this.screenControls.getState().forEach(function (ctrl, i) {\n          if (ctrl.left) {\n            _this.input[i].direction = -1;\n          }\n\n          if (ctrl.right) {\n            _this.input[i].direction = 1;\n          }\n\n          _this.input[i].action = _this.input[i].action || ctrl.action;\n        });\n      }\n\n      if (this.config.useGamepads) {\n        Array.from(navigator.getGamepads()).forEach(function (gp, i) {\n          if (gp !== null) {\n            if (gp.axes[0] < -0.5) {\n              _this.input[i].direction = -1;\n            }\n\n            if (gp.axes[0] > 0.5) {\n              _this.input[i].direction = 1;\n            }\n\n            _this.input[i].action = _this.input[i].action || gp.buttons[1].pressed || gp.buttons[2].pressed;\n          }\n        });\n      }\n\n      if (this.debugControlsPane) {\n        this.debugControlsPane.textContent = this.input.map(function (ctrl, i) {\n          return \"C\".concat(i, \": d=\").concat(ctrl.direction, \" a=\").concat(ctrl.action ? 'T' : 'F');\n        }).join(\"\\xA0\\xA0\\xA0\\xA0\"); // four &nbsp;\n      }\n    }\n    /**\n     * Game loop\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this2 = this;\n\n      var gameLoop = function gameLoop(ts) {\n        if (!_this2.isPaused) {\n          _this2.readInput();\n\n          _this2.currentMode.handleInput(_this2.input, _this2.inputLast);\n\n          _this2.currentMode.draw(ts);\n\n          window.requestAnimationFrame(gameLoop);\n        }\n      };\n\n      window.requestAnimationFrame(gameLoop);\n    }\n    /**\n     * Pauses the game.\n     *\n     * While paused the main game loop not run.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.isPaused = true;\n    }\n    /**\n     * Resumes the game.\n     *\n     * Enables the main game loop.\n     */\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      if (this.isPaused) {\n        this.isPaused = false;\n        this.run();\n      }\n    }\n    /**\n     * Registers a game mode\n     *\n     * @private\n     * @param {string} id\n     *  A name that identifies the mode\n     * @param {GameMode} mode\n     *  A GameMode subclass\n     * @return {Promise<void>}\n     */\n\n  }, {\n    key: \"registerMode\",\n    value: function () {\n      var _registerMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(id, mode) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.modes[id] = mode;\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function registerMode(_x3, _x4) {\n        return _registerMode.apply(this, arguments);\n      }\n\n      return registerMode;\n    }()\n    /**\n     * Changes the current game mode\n     *\n     * @param {string} modeID\n     *  Name of a previously registered mode\n     * @return {Promise<void>}\n     */\n\n  }, {\n    key: \"setMode\",\n    value: function () {\n      var _setMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(modeID) {\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                this.pause();\n\n                if (!this.currentMode) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                _context5.next = 4;\n                return this.currentMode.handleExitMode();\n\n              case 4:\n                if (!(this.modes[modeID] === undefined)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                throw new Error(\"Can't change to unknown mode \".concat(modeID));\n\n              case 6:\n                this.currentMode = this.modes[modeID];\n                _context5.next = 9;\n                return this.currentMode.handleEnterMode();\n\n              case 9:\n                this.resume();\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function setMode(_x5) {\n        return _setMode.apply(this, arguments);\n      }\n\n      return setMode;\n    }()\n  }]);\n\n  return GradientDescentGame;\n}();\n\nexports[\"default\"] = GradientDescentGame;\n\n},{\"./game-mode-play\":1,\"./screen-controls\":5}],4:[function(require,module,exports){\n\"use strict\";\n\nvar _game = _interopRequireDefault(require(\"./game\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar defaultConfig = {\n  defaultLanguage: 'en',\n  useGamepads: true,\n  useScreenControls: true,\n  maxPlayers: 2,\n  debugControls: false\n};\n/**\n * Loads the config file from an external JSON file\n *\n * @param {String} uri\n * @return {Promise<any>}\n */\n\nfunction loadConfig(_x) {\n  return _loadConfig.apply(this, arguments);\n}\n/**\n * Load config files and start the program\n */\n\n\nfunction _loadConfig() {\n  _loadConfig = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(uri) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(uri);\n\n          case 2:\n            response = _context2.sent;\n\n            if (!(response.status >= 200 && response.status < 300)) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 4;\n            _context2.next = 7;\n            return response.json();\n\n          case 7:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](4);\n            throw new Error(\"Error parsing config file: \".concat(_context2.t0.message));\n\n          case 13:\n            throw new Error(\"Server returned status \".concat(response.status, \" (\").concat(response.statusText, \") loading config file.\"));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 10]]);\n  }));\n  return _loadConfig.apply(this, arguments);\n}\n\n(function () {\n  var _main = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var config, game;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.t0 = Object;\n            _context.t1 = {};\n            _context.t2 = defaultConfig;\n            _context.next = 6;\n            return loadConfig('./config.json');\n\n          case 6:\n            _context.t3 = _context.sent;\n            config = _context.t0.assign.call(_context.t0, _context.t1, _context.t2, _context.t3);\n            _context.next = 10;\n            return IMAGINARY.i18n.init({\n              queryStringVariable: 'lang',\n              translationsDirectory: 'tr',\n              defaultLanguage: config.defaultLanguage || 'en'\n            });\n\n          case 10:\n            // eslint-disable-next-line no-unused-vars\n            game = new _game[\"default\"](document.querySelector('.main'), config);\n            _context.next = 13;\n            return game.init();\n\n          case 13:\n            game.run();\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t4 = _context[\"catch\"](0);\n            // eslint-disable-next-line no-console\n            console.error(_context.t4);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 16]]);\n  }));\n\n  function main() {\n    return _main.apply(this, arguments);\n  }\n\n  return main;\n})()();\n\n},{\"./game\":3}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Component that handles on-screen controls\n *\n * Supports both mouse and multitouch input.\n *\n */\nvar ScreenControls = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {Number} count\n   *  (Integer) Number of controllers to show\n   */\n  function ScreenControls(count) {\n    var _this = this;\n\n    _classCallCheck(this, ScreenControls);\n\n    this.element = document.createElement('div');\n    this.element.classList.add('screen-controls');\n    this.element.classList.add(\"with-\".concat(count, \"-controls\"));\n    this.state = []; // Initialize the state of each controller\n\n    for (var i = 0; i < count; i += 1) {\n      this.state.push({\n        left: false,\n        right: false,\n        action: false\n      });\n      this.element.appendChild(this.buildControl(i));\n    } // Global mouseup handling for all buttons\n\n\n    this.mousePressedButton = null;\n    window.addEventListener('mouseup', function () {\n      if (_this.mousePressedButton !== null) {\n        _this.state[_this.mousePressedButton.id][_this.mousePressedButton.name] = false;\n\n        _this.mousePressedButton.element.classList.remove('active');\n\n        _this.mousePressedButton = null;\n      }\n    });\n  }\n  /**\n   * Builds a single on-screen controller\n   *\n   * @private\n   * @param {Number} id\n   *  Zero-based integer index of the controller\n   * @return {HTMLDivElement}\n   */\n\n\n  _createClass(ScreenControls, [{\n    key: \"buildControl\",\n    value: function buildControl(id) {\n      var _this2 = this;\n\n      var root = document.createElement('div');\n      root.classList.add('screen-control', \"screen-control-\".concat(id));\n\n      var newButton = function newButton(name) {\n        var button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.classList.add(name);\n\n        var checkTouches = function checkTouches(ev) {\n          if (ev.targetTouches.length > 0) {\n            _this2.state[id][name] = true;\n            button.classList.add('active');\n          } else {\n            _this2.state[id][name] = false;\n            button.classList.remove('active');\n          }\n\n          ev.preventDefault();\n        };\n\n        button.addEventListener('touchstart', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchmove', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchend', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchcancel', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('mousedown', function () {\n          _this2.state[id][name] = true;\n          button.classList.add('active');\n          _this2.mousePressedButton = {\n            id: id,\n            name: name,\n            element: button\n          };\n        });\n        return button;\n      };\n\n      root.appendChild(newButton('left'));\n      root.appendChild(newButton('action'));\n      root.appendChild(newButton('right'));\n      return root;\n    }\n    /**\n     * Returns state of all controllers\n     *\n     * State is returned as an array with one object per controller\n     * with properties indicating the state of each button.\n     *\n     * @return {[{\n     *   left: Boolean,\n     *   right: Boolean,\n     *   action: Boolean\n     * }]}\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n  }]);\n\n  return ScreenControls;\n}();\n\nexports[\"default\"] = ScreenControls;\n\n},{}]},{},[4]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","obj","_gameMode","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","result","Super","_getPrototypeOf","Reflect","construct","sham","Proxy","Date","toString","_isNativeReflectConstruct","NewTarget","ReferenceError","_assertThisInitialized","getPrototypeOf","PlayMode","subClass","superClass","TypeError","create","_inherits","Constructor","protoProps","staticProps","_handleExitMode","_handleEnterMode","_preLoadAssets","_super","instance","_classCallCheck","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","game","loadSVGSymbol","stroke","color","width","fill","shipSymbol","sent","stop","_callee2","svg","_context2","line","boat","use","size","center","window","myBoat","_callee3","_context3","./game-mode","2","GameMode","3","_gameModePlay","_interopRequireDefault","_screenControls","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","push","_iterableToArrayLimit","minLen","_arrayLikeToArray","slice","name","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","GradientDescentGame","container","config","input","inputLast","initInput","isPaused","modes","currentMode","screenControls","debugControlsPane","_setMode","_registerMode","_loadSVGSymbol","_init","preloaders","SVG","addTo","useScreenControls","maxPlayers","appendChild","element","debugControls","document","createElement","classList","add","registerMode","entries","map","_ref2","_ref","_ref3","mode","abrupt","preLoadAssets","_x","all","setMode","uri","clearStyles","response","newSymbol","_args3","fetch","status","concat","statusText","t0","symbol","text","t1","find","forEach","s","remove","_x2","direction","action","_this","getState","ctrl","left","right","useGamepads","navigator","getGamepads","gp","axes","buttons","pressed","textContent","join","_this2","requestAnimationFrame","gameLoop","ts","readInput","handleInput","draw","run","_callee4","id","_context4","_x3","_x4","_callee5","modeID","_context5","pause","handleExitMode","handleEnterMode","resume","_x5","./game-mode-play","./screen-controls","4","_game","_main","defaultConfig","defaultLanguage","loadConfig","_loadConfig","json","message","t2","t3","assign","IMAGINARY","i18n","init","queryStringVariable","translationsDirectory","querySelector","t4","console","./game","5","ScreenControls","count","state","buildControl","mousePressedButton","addEventListener","root","newButton","button","checkTouches","ev","targetTouches","preventDefault","setAttribute","passive"],"mappings":"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"}