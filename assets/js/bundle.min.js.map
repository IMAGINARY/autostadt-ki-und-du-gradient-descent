{"version":3,"file":"bundle.min.js","sources":["bundle.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameMode = _interopRequireDefault(require(\"./game-mode\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar PlayerNumberMode = /*#__PURE__*/function (_GameMode) {\n  _inherits(PlayerNumberMode, _GameMode);\n\n  var _super = _createSuper(PlayerNumberMode);\n\n  function PlayerNumberMode() {\n    _classCallCheck(this, PlayerNumberMode);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PlayerNumberMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var $overlay, maxPlayers, $selector, i;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                $overlay = $(this.game.overlay);\n                maxPlayers = this.game.config.maxPlayers;\n                this.selectedNumber = 1;\n                this.selectorItems = {};\n                $('<div class=\"text text-center numPlayers-title\" />').text(IMAGINARY.i18n.t('choose-num-players')).appendTo($overlay);\n                $selector = $('<div class=\"numPlayers-selector\" />').addClass(\"numPlayers-selector-with-\".concat(maxPlayers)).appendTo($overlay);\n\n                for (i = 1; i <= maxPlayers; i += 1) {\n                  this.selectorItems[i] = $('<div class=\"item\" />').addClass(\"item-\".concat(i)).toggleClass('selected', this.selectedNumber === i).text(i).appendTo($selector);\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {\n      var maxPlayers = this.game.config.maxPlayers;\n      var newSelection = null;\n\n      if (input.find(function (ctrl, i) {\n        return ctrl.direction === -1 && lastInput[i].direction !== -1;\n      })) {\n        newSelection = Math.max(1, this.selectedNumber - 1);\n      } else if (input.find(function (ctrl, i) {\n        return ctrl.direction === 1 && lastInput[i].direction !== 1;\n      })) {\n        newSelection = Math.min(maxPlayers, this.selectedNumber + 1);\n      }\n\n      if (newSelection && newSelection !== this.selectedNumber) {\n        this.selectorItems[this.selectedNumber].removeClass('selected');\n        this.selectorItems[newSelection].addClass('selected');\n        this.selectedNumber = newSelection;\n      } // If any button was pressed\n\n\n      if (input.find(function (ctrl, i) {\n        return ctrl.action && !lastInput[i].action;\n      })) {\n        this.game.numPlayers = this.selectedNumber;\n        this.triggerEvent('done');\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(delta, ts) {// Move boats\n      // Draw bottom\n      // etc...\n    }\n  }]);\n\n  return PlayerNumberMode;\n}(_gameMode[\"default\"]);\n\nexports[\"default\"] = PlayerNumberMode;\n\n},{\"./game-mode\":4}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameMode = _interopRequireDefault(require(\"./game-mode\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar PlayMode = /*#__PURE__*/function (_GameMode) {\n  _inherits(PlayMode, _GameMode);\n\n  var _super = _createSuper(PlayMode);\n\n  function PlayMode() {\n    _classCallCheck(this, PlayMode);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PlayMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.game.loadSVGSymbol('assets/img/ship.svg');\n\n              case 2:\n                this.shipSymbol = _context.sent;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$game, draw, numPlayers;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$game = this.game, draw = _this$game.draw, numPlayers = _this$game.numPlayers;\n                draw.line(0, 200, 1920, 200).stroke({\n                  color: '#9999ff',\n                  width: 2\n                });\n                this.boat = draw.use(this.shipSymbol).size(300, 200).stroke({\n                  color: '#ff0000',\n                  width: 2\n                }).fill('transparent').center(300, 165); // todo: remove (temporary)\n\n                window.myBoat = this.boat;\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {// Move the boats or check if they're lowering the probe\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(delta, ts) {\n      var _this$game2 = this.game,\n          draw = _this$game2.draw,\n          numPlayers = _this$game2.numPlayers; // Move boats\n      // Draw bottom\n      // etc...\n    }\n  }]);\n\n  return PlayMode;\n}(_gameMode[\"default\"]);\n\nexports[\"default\"] = PlayMode;\n\n},{\"./game-mode\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameMode = _interopRequireDefault(require(\"./game-mode\"));\n\nvar _wavyAnimation = _interopRequireDefault(require(\"./wavy-animation\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar TitleMode = /*#__PURE__*/function (_GameMode) {\n  _inherits(TitleMode, _GameMode);\n\n  var _super = _createSuper(TitleMode);\n\n  function TitleMode() {\n    _classCallCheck(this, TitleMode);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(TitleMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.game.loadSVGSymbol('assets/img/descent-logo.svg');\n\n              case 2:\n                this.logoSprite = _context.sent;\n                this.poly = this.logoSprite.findOne('#descent');\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var draw, pressToStart, gradientLogo;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                draw = this.game.draw;\n                pressToStart = document.createElement('div');\n                pressToStart.classList.add('blinking', 'text', 'text-center', 'text-vcenter');\n                pressToStart.textContent = IMAGINARY.i18n.t('press-to-start');\n                this.game.overlay.append(pressToStart);\n                gradientLogo = draw.use(this.logoSprite).size(1200, 400).stroke({\n                  color: '#00368a',\n                  width: 2\n                }).fill('transparent').center(1920 / 2, 1080 / 2.5);\n                gradientLogo.animate({\n                  duration: 5000\n                }).stroke({\n                  color: '#34c6ff'\n                });\n                this.wavyStep = (0, _wavyAnimation[\"default\"])(this.logoSprite, {\n                  duration: 3500\n                });\n                this.animCounter = 0;\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {\n      // If any button was pressed\n      if (input.find(function (ctrl, i) {\n        return ctrl.action && !lastInput[i].action;\n      })) {\n        this.triggerEvent('done');\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(delta, ts) {\n      this.wavyStep(delta, ts);\n    }\n  }]);\n\n  return TitleMode;\n}(_gameMode[\"default\"]);\n\nexports[\"default\"] = TitleMode;\n\n},{\"./game-mode\":4,\"./wavy-animation\":8}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Abstract class for GameMode\n *\n * A GameMode does the actual handling of the input and drawing\n */\nvar GameMode = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {GradientDescentGame} game\n   */\n  function GameMode(game) {\n    _classCallCheck(this, GameMode);\n\n    // noinspection JSUnusedGlobalSymbols\n    this.game = game;\n    this.events = new _events[\"default\"]();\n  }\n  /**\n   * Preload any external assets that will be needed during the game\n   *\n   * This method runs during game initialization.\n   * @return {Promise<void>}\n   */\n\n\n  _createClass(GameMode, [{\n    key: \"preLoadAssets\",\n    value: function () {\n      var _preLoadAssets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function preLoadAssets() {\n        return _preLoadAssets.apply(this, arguments);\n      }\n\n      return preLoadAssets;\n    }()\n    /**\n     * Called by the game when the mode is entered.\n     *\n     * Can be used to add DOM elements, event handlers and initialize\n     * internal state. Anything done here must be cleaned up in\n     * handleExitMode.\n     */\n\n  }, {\n    key: \"handleEnterMode\",\n    value: function () {\n      var _handleEnterMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function handleEnterMode() {\n        return _handleEnterMode.apply(this, arguments);\n      }\n\n      return handleEnterMode;\n    }()\n    /**\n     * Called by the game when the mode is going to be exited\n     *\n     * Should be used to remove DOM elements, event handlers\n     * or anything else that was created on handleEnterMode.\n     */\n\n  }, {\n    key: \"handleExitMode\",\n    value: function () {\n      var _handleExitMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleExitMode() {\n        return _handleExitMode.apply(this, arguments);\n      }\n\n      return handleExitMode;\n    }()\n    /**\n     * Called once per frame so the mode can handle controller input\n     *\n     * Current input state and the previous one are passed\n     * to help with state change detection.\n     *\n     * Both are arrays with N objects with shape:\n     * - direction {integer}: Either -1, 0 or 1.\n     * - action {bool}\n     *\n     * @param {[{direction: Number, action: Boolean}]} input\n     * @param {[{direction: Number, action: Boolean}]} lastInput\n     */\n\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(input, lastInput) {}\n    /**\n     * Called once per frame so the mode can draw based on the game's state\n     *\n     * @param {Number }delta\n     *  Amount of milliseconds since the last call (capped to a maximum)\n     * @param {Number} ts\n     *  Timestamp received via requestAnimationFrame\n     */\n\n  }, {\n    key: \"draw\",\n    value: function draw(delta, ts) {}\n    /**\n     * Triggers an event for the game to handle\n     *\n     * Events can be used to transition to another mode, etc.\n     *\n     * @param {string} name\n     */\n\n  }, {\n    key: \"triggerEvent\",\n    value: function triggerEvent(name) {\n      this.events.emit(name);\n    }\n  }]);\n\n  return GameMode;\n}();\n\nexports[\"default\"] = GameMode;\n\n},{\"events\":9}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _gameModePlay = _interopRequireDefault(require(\"./game-mode-play\"));\n\nvar _gameModeTitle = _interopRequireDefault(require(\"./game-mode-title\"));\n\nvar _gameModeNumplayers = _interopRequireDefault(require(\"./game-mode-numplayers\"));\n\nvar _screenControls = _interopRequireDefault(require(\"./screen-controls\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * The main application\n *\n * This class creates the main UI elements and runs the\n * main game loop (read input, draw).\n *\n * The game can be in one of various modes (see GameMode)\n * which decides how to draw and process input.\n */\nvar GradientDescentGame = /*#__PURE__*/function () {\n  function GradientDescentGame(container, config) {\n    _classCallCheck(this, GradientDescentGame);\n\n    this.container = container;\n    this.config = config;\n    this.input = [];\n    this.inputLast = [];\n    this.initInput();\n    this.isPaused = false;\n    this.modes = {};\n    this.currentMode = null;\n    this.screenControls = null;\n    this.debugControlsPane = null;\n    this.numPlayers = this.config.maxPlayers;\n  }\n  /**\n   * Initializes the app and downloads any external assets\n   *\n   * @return {Promise<void>}\n   */\n\n\n  _createClass(GradientDescentGame, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.svgDoc = SVG().addTo(this.container).size(500, 500);\n                this.draw = this.svgDoc.nested();\n                this.overlay = document.createElement('div');\n                this.overlay.classList.add('overlay');\n                this.container.append(this.overlay);\n\n                if (this.config.useScreenControls) {\n                  this.screenControls = new _screenControls[\"default\"](this.config.maxPlayers);\n                  this.container.appendChild(this.screenControls.element);\n                }\n\n                if (this.config.debugControls) {\n                  this.debugControlsPane = document.createElement('div');\n                  this.debugControlsPane.classList.add('debug-pane');\n                  this.debugControlsPane.classList.add('debug-pane-controls');\n                  this.container.appendChild(this.debugControlsPane);\n                }\n\n                _context.next = 9;\n                return this.registerMode('title', new _gameModeTitle[\"default\"](this));\n\n              case 9:\n                _context.next = 11;\n                return this.registerMode('numplayers', new _gameModeNumplayers[\"default\"](this));\n\n              case 11:\n                _context.next = 13;\n                return this.registerMode('play', new _gameModePlay[\"default\"](this));\n\n              case 13:\n                if (!this.config.continuousGame) {\n                  _context.next = 19;\n                  break;\n                }\n\n                this.transition('play', 'done', 'play');\n                _context.next = 17;\n                return this.setMode('play');\n\n              case 17:\n                _context.next = 24;\n                break;\n\n              case 19:\n                this.transition('title', 'done', this.config.maxPlayers > 1 ? 'numplayers' : 'play');\n                this.transition('numplayers', 'done', 'play');\n                this.transition('play', 'done', 'title');\n                _context.next = 24;\n                return this.setMode('title');\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n    /**\n     * Loads an external SVG file into a symbol within the main svg element\n     *\n     * @param {string} uri\n     * @param {boolean} clearStyles\n     *  If true removes the style elements from the file\n     * @return {Promise<SVG.Symbol>}\n     */\n\n  }, {\n    key: \"loadSVGSymbol\",\n    value: function () {\n      var _loadSVGSymbol = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(uri) {\n        var clearStyles,\n            response,\n            newSymbol,\n            _args2 = arguments;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                clearStyles = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : true;\n                _context2.next = 3;\n                return fetch(uri);\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(response.status < 200 || response.status >= 300)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(\"Server returned status \".concat(response.status, \" (\").concat(response.statusText, \") loading \").concat(uri, \".\"));\n\n              case 6:\n                _context2.t0 = this.svgDoc.symbol();\n                _context2.next = 9;\n                return response.text();\n\n              case 9:\n                _context2.t1 = _context2.sent;\n                newSymbol = _context2.t0.svg.call(_context2.t0, _context2.t1);\n\n                if (clearStyles) {\n                  newSymbol.find('style').forEach(function (s) {\n                    s.remove();\n                  });\n                }\n\n                return _context2.abrupt(\"return\", newSymbol);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadSVGSymbol(_x) {\n        return _loadSVGSymbol.apply(this, arguments);\n      }\n\n      return loadSVGSymbol;\n    }()\n    /**\n     * Initializes the input state\n     *\n     * @private\n     */\n\n  }, {\n    key: \"initInput\",\n    value: function initInput() {\n      this.input = Array(this.config.maxPlayers).fill(null).map(function () {\n        return {\n          direction: 0,\n          action: false\n        };\n      });\n    }\n    /**\n     * Reads the input state from all enabled controller types\n     *\n     * Loads the new input state in this.input and the previous\n     * state in this.inputLast.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"readInput\",\n    value: function readInput() {\n      var _this = this;\n\n      this.inputLast = this.input;\n      this.initInput();\n\n      if (this.screenControls) {\n        this.screenControls.getState().forEach(function (ctrl, i) {\n          if (ctrl.left) {\n            _this.input[i].direction = -1;\n          }\n\n          if (ctrl.right) {\n            _this.input[i].direction = 1;\n          }\n\n          _this.input[i].action = _this.input[i].action || ctrl.action;\n        });\n      }\n\n      if (this.config.useGamepads) {\n        Array.from(navigator.getGamepads()).forEach(function (gp, i) {\n          if (gp !== null) {\n            if (gp.axes[0] < -0.5) {\n              _this.input[i].direction = -1;\n            }\n\n            if (gp.axes[0] > 0.5) {\n              _this.input[i].direction = 1;\n            }\n\n            _this.input[i].action = _this.input[i].action || gp.buttons[1].pressed || gp.buttons[2].pressed;\n          }\n        });\n      }\n\n      if (this.debugControlsPane) {\n        this.debugControlsPane.textContent = this.input.map(function (ctrl, i) {\n          return \"C\".concat(i, \": d=\").concat(ctrl.direction, \" a=\").concat(ctrl.action ? 'T' : 'F');\n        }).join(\"\\xA0\\xA0\\xA0\\xA0\"); // four &nbsp;\n      }\n    }\n    /**\n     * Game loop\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this2 = this;\n\n      var lastTs = 0;\n      var MAX_DELTA = 125;\n\n      var gameLoop = function gameLoop(ts) {\n        if (!_this2.isPaused) {\n          _this2.readInput();\n\n          _this2.currentMode.handleInput(_this2.input, _this2.inputLast);\n\n          _this2.currentMode.draw(Math.min(ts - lastTs, MAX_DELTA), ts);\n\n          lastTs = ts;\n          window.requestAnimationFrame(gameLoop);\n        }\n      };\n\n      window.requestAnimationFrame(gameLoop);\n    }\n    /**\n     * Pauses the game.\n     *\n     * While paused the main game loop not run.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.isPaused = true;\n    }\n    /**\n     * Resumes the game.\n     *\n     * Enables the main game loop.\n     */\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      if (this.isPaused) {\n        this.isPaused = false;\n        this.run();\n      }\n    }\n    /**\n     * Registers a game mode\n     *\n     * @private\n     * @param {string} id\n     *  A name that identifies the mode\n     * @param {GameMode} mode\n     *  A GameMode subclass\n     * @return {Promise<void>}\n     */\n\n  }, {\n    key: \"registerMode\",\n    value: function () {\n      var _registerMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id, mode) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.modes[id] = mode;\n                _context3.next = 3;\n                return mode.preLoadAssets();\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function registerMode(_x2, _x3) {\n        return _registerMode.apply(this, arguments);\n      }\n\n      return registerMode;\n    }()\n    /**\n     * Changes the current game mode\n     *\n     * @param {string} modeID\n     *  Name of a previously registered mode\n     * @return {Promise<void>}\n     */\n\n  }, {\n    key: \"setMode\",\n    value: function () {\n      var _setMode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(modeID) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.pause();\n\n                if (!this.currentMode) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this.currentMode.handleExitMode();\n\n              case 4:\n                if (!(this.modes[modeID] === undefined)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                throw new Error(\"Can't change to unknown mode \".concat(modeID));\n\n              case 6:\n                this.currentMode = this.modes[modeID];\n                this.draw.clear();\n                this.overlay.innerHTML = '';\n                _context4.next = 11;\n                return this.currentMode.handleEnterMode();\n\n              case 11:\n                this.resume();\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function setMode(_x4) {\n        return _setMode.apply(this, arguments);\n      }\n\n      return setMode;\n    }()\n  }, {\n    key: \"transition\",\n    value: function transition(modeId, event) {\n      var _this3 = this;\n\n      var nextModeId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n      if (this.modes[modeId] === undefined) {\n        throw new Error(\"Can't define transition from unknown game mode '\".concat(modeId, \"'\"));\n      }\n\n      if (nextModeId && this.modes[nextModeId] === undefined) {\n        throw new Error(\"Can't define transition to unknown game mode '\".concat(nextModeId, \"'\"));\n      }\n\n      this.modes[modeId].events.on(event, function () {\n        if (_this3.currentMode !== _this3.modes[modeId]) {\n          throw new Error(\"Mode \".concat(modeId, \" triggered the event \").concat(event, \" while not active. Something was not cleaned up?\"));\n        }\n\n        if (nextModeId !== null) {\n          _this3.setMode(nextModeId);\n        }\n\n        if (callback && typeof callback === 'function') {\n          callback();\n        }\n      });\n    }\n  }]);\n\n  return GradientDescentGame;\n}();\n\nexports[\"default\"] = GradientDescentGame;\n\n},{\"./game-mode-numplayers\":1,\"./game-mode-play\":2,\"./game-mode-title\":3,\"./screen-controls\":7}],6:[function(require,module,exports){\n\"use strict\";\n\nvar _game = _interopRequireDefault(require(\"./game\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar defaultConfig = {\n  defaultLanguage: 'en',\n  useGamepads: true,\n  useScreenControls: true,\n  maxPlayers: 2,\n  continuousGame: false,\n  debugControls: false\n};\n/**\n * Loads the config file from an external JSON file\n *\n * @param {String} uri\n * @return {Promise<any>}\n */\n\nfunction loadConfig(_x) {\n  return _loadConfig.apply(this, arguments);\n}\n/**\n * Load config files and start the program\n */\n\n\nfunction _loadConfig() {\n  _loadConfig = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(uri) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(uri);\n\n          case 2:\n            response = _context2.sent;\n\n            if (!(response.status >= 200 && response.status < 300)) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 4;\n            _context2.next = 7;\n            return response.json();\n\n          case 7:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](4);\n            throw new Error(\"Error parsing config file: \".concat(_context2.t0.message));\n\n          case 13:\n            throw new Error(\"Server returned status \".concat(response.status, \" (\").concat(response.statusText, \") loading config file.\"));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 10]]);\n  }));\n  return _loadConfig.apply(this, arguments);\n}\n\n(function () {\n  var _main = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var config, game;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.t0 = Object;\n            _context.t1 = {};\n            _context.t2 = defaultConfig;\n            _context.next = 6;\n            return loadConfig('./config.json');\n\n          case 6:\n            _context.t3 = _context.sent;\n            config = _context.t0.assign.call(_context.t0, _context.t1, _context.t2, _context.t3);\n            _context.next = 10;\n            return IMAGINARY.i18n.init({\n              queryStringVariable: 'lang',\n              translationsDirectory: 'tr',\n              defaultLanguage: config.defaultLanguage || 'en'\n            });\n\n          case 10:\n            // eslint-disable-next-line no-unused-vars\n            game = new _game[\"default\"](document.querySelector('.main'), config);\n            _context.next = 13;\n            return game.init();\n\n          case 13:\n            _context.next = 18;\n            break;\n\n          case 15:\n            _context.prev = 15;\n            _context.t4 = _context[\"catch\"](0);\n            // eslint-disable-next-line no-console\n            console.error(_context.t4);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 15]]);\n  }));\n\n  function main() {\n    return _main.apply(this, arguments);\n  }\n\n  return main;\n})()();\n\n},{\"./game\":5}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Component that handles on-screen controls\n *\n * Supports both mouse and multitouch input.\n *\n */\nvar ScreenControls = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {Number} count\n   *  (Integer) Number of controllers to show\n   */\n  function ScreenControls(count) {\n    var _this = this;\n\n    _classCallCheck(this, ScreenControls);\n\n    this.element = document.createElement('div');\n    this.element.classList.add('screen-controls');\n    this.element.classList.add(\"with-\".concat(count, \"-controls\"));\n    this.state = []; // Initialize the state of each controller\n\n    for (var i = 0; i < count; i += 1) {\n      this.state.push({\n        left: false,\n        right: false,\n        action: false\n      });\n      this.element.appendChild(this.buildControl(i));\n    } // Global mouseup handling for all buttons\n\n\n    this.mousePressedButton = null;\n    window.addEventListener('mouseup', function () {\n      if (_this.mousePressedButton !== null) {\n        _this.state[_this.mousePressedButton.id][_this.mousePressedButton.name] = false;\n\n        _this.mousePressedButton.element.classList.remove('active');\n\n        _this.mousePressedButton = null;\n      }\n    });\n  }\n  /**\n   * Builds a single on-screen controller\n   *\n   * @private\n   * @param {Number} id\n   *  Zero-based integer index of the controller\n   * @return {HTMLDivElement}\n   */\n\n\n  _createClass(ScreenControls, [{\n    key: \"buildControl\",\n    value: function buildControl(id) {\n      var _this2 = this;\n\n      var root = document.createElement('div');\n      root.classList.add('screen-control', \"screen-control-\".concat(id));\n\n      var newButton = function newButton(name) {\n        var button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.classList.add(name);\n\n        var checkTouches = function checkTouches(ev) {\n          if (ev.targetTouches.length > 0) {\n            _this2.state[id][name] = true;\n            button.classList.add('active');\n          } else {\n            _this2.state[id][name] = false;\n            button.classList.remove('active');\n          }\n\n          ev.preventDefault();\n        };\n\n        button.addEventListener('touchstart', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchmove', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchend', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('touchcancel', checkTouches, {\n          passive: false\n        });\n        button.addEventListener('mousedown', function () {\n          _this2.state[id][name] = true;\n          button.classList.add('active');\n          _this2.mousePressedButton = {\n            id: id,\n            name: name,\n            element: button\n          };\n        });\n        return button;\n      };\n\n      root.appendChild(newButton('left'));\n      root.appendChild(newButton('action'));\n      root.appendChild(newButton('right'));\n      return root;\n    }\n    /**\n     * Returns state of all controllers\n     *\n     * State is returned as an array with one object per controller\n     * with properties indicating the state of each button.\n     *\n     * @return {[{\n     *   left: Boolean,\n     *   right: Boolean,\n     *   action: Boolean\n     * }]}\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n  }]);\n\n  return ScreenControls;\n}();\n\nexports[\"default\"] = ScreenControls;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = WavyAnimation;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * Setup a wave-like animation for an svg.js shape made up of polygons.\n *\n * This animation works by applying a transformation on all points of\n * all polygons of the passed shape. The points will move on a sine wave\n * that is continuously phase shifting and whose amplitude decreases over time.\n *\n * Returns a stepping function that takes a delta in milliseconds which should\n * be called on the frame rendering function.\n *\n * Options:\n * - xAmplitude: Maximum distance that the x coordinates are shifted from their\n *   starting position.\n * - duration: Duration of the animation\n * - cycles: Number of cycles of phase shifting.\n *\n * @param {SVG.Container} shape\n *  The shape whose polygons will be animated\n * @param {Object} userOptions\n *  Options (see above)\n * @return {function(...[*]=)}\n *  Returns an animation callback that takes a delta.\n */\nfunction WavyAnimation(shape) {\n  var userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var defaultOptions = {\n    xAmplitude: 50,\n    duration: 5000,\n    cycles: 3\n  };\n  var options = Object.assign({}, defaultOptions, userOptions);\n  var polygons = shape.find('polygon');\n  var originalPlots = polygons.map(function (p) {\n    return p.plot();\n  });\n  var maxY = Math.max.apply(Math, _toConsumableArray(originalPlots.flat().map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        y = _ref2[1];\n\n    return y;\n  })));\n  var counter = 0;\n  return function (delta, ts) {\n    if (counter > options.duration) {\n      return;\n    }\n\n    counter += delta;\n    var progress = Math.min(counter, options.duration) / options.duration;\n    polygons.forEach(function (p, i) {\n      p.plot(originalPlots[i].map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            x = _ref4[0],\n            y = _ref4[1];\n\n        return [x + Math.sin((y / maxY + progress * options.cycles) * Math.PI * 2) * options.xAmplitude * (1 - Math.pow(progress, 2)), y];\n      }));\n    });\n  };\n}\n\n},{}],9:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (!events)\n    return [];\n\n  var evlistener = events[type];\n  if (!evlistener)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n\n},{}]},{},[6]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","obj","_gameMode","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","result","Super","_getPrototypeOf","Reflect","construct","sham","Proxy","Date","toString","_isNativeReflectConstruct","NewTarget","ReferenceError","_assertThisInitialized","getPrototypeOf","PlayerNumberMode","subClass","superClass","TypeError","create","_inherits","Constructor","protoProps","staticProps","_handleExitMode","_handleEnterMode","_preLoadAssets","_super","instance","_classCallCheck","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","_callee2","$overlay","maxPlayers","$selector","_context2","$","game","overlay","config","selectedNumber","selectorItems","text","IMAGINARY","i18n","appendTo","addClass","concat","toggleClass","_callee3","_context3","input","lastInput","newSelection","find","ctrl","direction","Math","max","min","removeClass","action","numPlayers","triggerEvent","./game-mode","2","PlayMode","loadSVGSymbol","shipSymbol","sent","_this$game","draw","line","stroke","color","width","boat","use","size","fill","center","window","myBoat","delta","ts","_this$game2","3","_interopRequireDefault","_wavyAnimation","TitleMode","logoSprite","poly","findOne","pressToStart","document","createElement","classList","add","textContent","append","animate","duration","wavyStep","animCounter","./wavy-animation","4","_events","GameMode","events","name","emit","5","_gameModePlay","_gameModeTitle","_gameModeNumplayers","_screenControls","GradientDescentGame","container","inputLast","initInput","isPaused","modes","currentMode","screenControls","debugControlsPane","_setMode","_registerMode","_loadSVGSymbol","_init","svgDoc","SVG","addTo","nested","useScreenControls","appendChild","element","debugControls","registerMode","continuousGame","transition","setMode","uri","clearStyles","response","newSymbol","_args2","fetch","status","statusText","t0","symbol","t1","svg","forEach","s","remove","abrupt","_x","Array","map","_this","getState","left","right","useGamepads","from","navigator","getGamepads","gp","axes","buttons","pressed","join","_this2","lastTs","requestAnimationFrame","gameLoop","readInput","handleInput","run","id","mode","preLoadAssets","_x2","_x3","_callee4","modeID","_context4","pause","handleExitMode","clear","innerHTML","handleEnterMode","resume","_x4","modeId","event","_this3","nextModeId","callback","on","./game-mode-numplayers","./game-mode-play","./game-mode-title","./screen-controls","6","_game","_main","defaultConfig","defaultLanguage","loadConfig","_loadConfig","json","message","t2","t3","assign","init","queryStringVariable","translationsDirectory","querySelector","t4","console","./game","7","ScreenControls","count","state","push","buildControl","mousePressedButton","addEventListener","root","newButton","button","checkTouches","ev","targetTouches","preventDefault","setAttribute","passive","8","_slicedToArray","arr","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","slice","test","len","arr2","shape","userOptions","options","xAmplitude","cycles","polygons","originalPlots","plot","maxY","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","_toConsumableArray","flat","_ref","counter","progress","_ref3","_ref4","x","y","sin","PI","pow","9","objectCreate","proto","F","objectKeys","keys","k","hasOwnProperty","bind","Function","context","EventEmitter","_eventsCount","_maxListeners","hasDefineProperty","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","m","existing","newListener","unshift","warned","w","String","emitter","warn","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","ret","unwrapListeners","arrayClone","listenerCount","copy","get","set","setMaxListeners","isNaN","getMaxListeners","er","handler","doError","isFn","listeners","emitNone","arg1","emitOne","arg2","emitTwo","arg3","emitThree","emitMany","addListener","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","removeAllListeners","rawListeners","eventNames","ownKeys"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAErB,IAEgCQ,EAF5BC,GAE4BD,EAFOd,EAAQ,iBAEMc,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASI,EAAQJ,GAAmV,OAAtOI,EAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBN,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXK,QAAyBL,EAAIO,cAAgBF,QAAUL,IAAQK,OAAOG,UAAY,gBAAkBR,IAAyBA,GAEnX,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAIjX,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAM7S,SAASI,EAAgBxD,EAAGS,GAA+G,OAA1G+C,EAAkBzC,OAAO0C,gBAAkB,SAAyBzD,EAAGS,GAAsB,OAAjBT,EAAE0D,UAAYjD,EAAUT,IAA6BA,EAAGS,GAErK,SAASkD,EAAaC,GAAW,OAAO,WAAc,IAAsCC,EAExDnB,EAAM/B,EAFgBmD,EAAQC,EAAgBH,GAAkB,GAMpG,WAAuC,GAAuB,oBAAZI,UAA4BA,QAAQC,UAAW,OAAc,GAAID,QAAQC,UAAUC,KAAM,OAAc,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAK1C,UAAU2C,SAAS1D,KAAKqD,QAAQC,UAAUG,KAAM,GAAI,eAAyB,EAAQ,MAAOvE,GAAK,QAN3MyE,GAA6B,CAAE,IAAIC,EAAYR,EAAgBpB,MAAMlB,YAAaoC,EAASG,QAAQC,UAAUH,EAAOjB,UAAW0B,QAAqBV,EAASC,EAAMhB,MAAMH,KAAME,WAAc,OAEjQH,EAFmSC,OAE7RhC,EAFmSkD,IAE5P,WAAlBvC,EAAQX,IAAsC,mBAATA,EAEpG,SAAgC+B,GAAQ,QAAa,IAATA,EAA4G,OAAOA,EAAhG,MAAM,IAAI8B,eAAe,6DAF0DC,CAAuB/B,GAAtC/B,GAMnI,SAASoD,EAAgB/D,GAAwJ,OAAnJ+D,EAAkBhD,OAAO0C,eAAiB1C,OAAO2D,eAAiB,SAAyB1E,GAAK,OAAOA,EAAE0D,WAAa3C,OAAO2D,eAAe1E,KAA8BA,GAExM,IAAI2E,EAAgC,YAdpC,SAAmBC,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIC,UAAU,sDAAyDF,EAASlD,UAAYX,OAAOgE,OAAOF,GAAcA,EAAWnD,UAAW,CAAED,YAAa,CAAER,MAAO2D,EAAUrB,UAAU,EAAMD,cAAc,KAAeuB,GAAYrB,EAAgBoB,EAAUC,GAejXG,CAAUL,EA6HVxD,EAAU,YA3HV,IAnBoB8D,EAAaC,EAAYC,EAqFrCC,EAlCAC,EArBAC,EAXJC,EAAS5B,EAAagB,GAE1B,SAASA,IAGP,OA5BJ,SAAyBa,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCA0B5GW,CAAgB9C,KAAMgC,GAEfY,EAAOzC,MAAMH,KAAME,WAqH5B,OA7IoBoC,EA2BPN,GA3BoBO,EA2BF,CAAC,CAC9BjD,IAAK,gBACLhB,OACMqE,EAAiB9C,EAAgCkD,mBAAmBC,KAAK,SAASC,IACpF,OAAOF,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACL,IAAK,MACH,OAAOF,EAASG,SAGrBL,MAGL,WACE,OAAON,EAAexC,MAAMH,KAAME,cAKrC,CACDZ,IAAK,kBACLhB,OACMoE,EAAmB7C,EAAgCkD,mBAAmBC,KAAK,SAASO,IACtF,IAAIC,EAAUC,EAAYC,EAAWpG,EACrC,OAAOyF,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EAQH,IAPAG,EAAWI,EAAE5D,KAAK6D,KAAKC,SACvBL,EAAazD,KAAK6D,KAAKE,OAAON,WAC9BzD,KAAKgE,eAAiB,EACtBhE,KAAKiE,cAAgB,GACrBL,EAAE,qDAAqDM,KAAKC,UAAUC,KAAKhH,EAAE,uBAAuBiH,SAASb,GAC7GE,EAAYE,EAAE,uCAAuCU,SAAS,4BAA4BC,OAAOd,IAAaY,SAASb,GAElHlG,EAAI,EAAGA,GAAKmG,EAAYnG,GAAK,EAChC0C,KAAKiE,cAAc3G,GAAKsG,EAAE,wBAAwBU,SAAS,QAAQC,OAAOjH,IAAIkH,YAAY,WAAYxE,KAAKgE,iBAAmB1G,GAAG4G,KAAK5G,GAAG+G,SAASX,GAGtJ,KAAK,EACL,IAAK,MACH,OAAOC,EAAUL,SAGtBC,EAAUvD,SAGf,WACE,OAAO0C,EAAiBvC,MAAMH,KAAME,cAKvC,CACDZ,IAAK,iBACLhB,OACMmE,EAAkB5C,EAAgCkD,mBAAmBC,KAAK,SAASyB,IACrF,OAAO1B,mBAAmBG,KAAK,SAAmBwB,GAChD,OACE,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EACL,IAAK,MACH,OAAOqB,EAAUpB,SAGtBmB,MAGL,WACE,OAAOhC,EAAgBtC,MAAMH,KAAME,cAKtC,CACDZ,IAAK,cACLhB,MAAO,SAAqBqG,EAAOC,GACjC,IAAInB,EAAazD,KAAK6D,KAAKE,OAAON,WAC9BoB,EAAe,KAEfF,EAAMG,KAAK,SAAUC,EAAMzH,GAC7B,OAA2B,IAApByH,EAAKC,YAAgD,IAA5BJ,EAAUtH,GAAG0H,YAE7CH,EAAeI,KAAKC,IAAI,EAAGlF,KAAKgE,eAAiB,GACxCW,EAAMG,KAAK,SAAUC,EAAMzH,GACpC,OAA0B,IAAnByH,EAAKC,WAA8C,IAA3BJ,EAAUtH,GAAG0H,cAE5CH,EAAeI,KAAKE,IAAI1B,EAAYzD,KAAKgE,eAAiB,IAGxDa,GAAgBA,IAAiB7E,KAAKgE,iBACxChE,KAAKiE,cAAcjE,KAAKgE,gBAAgBoB,YAAY,YACpDpF,KAAKiE,cAAcY,GAAcP,SAAS,YAC1CtE,KAAKgE,eAAiBa,GAIpBF,EAAMG,KAAK,SAAUC,EAAMzH,GAC7B,OAAOyH,EAAKM,SAAWT,EAAUtH,GAAG+H,WAEpCrF,KAAK6D,KAAKyB,WAAatF,KAAKgE,eAC5BhE,KAAKuF,aAAa,WAGrB,CACDjG,IAAK,OACLhB,MAAO,iBAvImEgC,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GA6I3KR,EA7H2B,GAgIpCjE,EAAiB,QAAIiE,GAEnB,CAACwD,cAAc,IAAIC,EAAE,CAAC,SAAShI,EAAQU,EAAOJ,GAChD,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAErB,IAEgCQ,EAF5BC,GAE4BD,EAFOd,EAAQ,iBAEMc,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASI,EAAQJ,GAAmV,OAAtOI,EAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBN,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXK,QAAyBL,EAAIO,cAAgBF,QAAUL,IAAQK,OAAOG,UAAY,gBAAkBR,IAAyBA,GAEnX,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAIjX,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAM7S,SAASI,EAAgBxD,EAAGS,GAA+G,OAA1G+C,EAAkBzC,OAAO0C,gBAAkB,SAAyBzD,EAAGS,GAAsB,OAAjBT,EAAE0D,UAAYjD,EAAUT,IAA6BA,EAAGS,GAErK,SAASkD,EAAaC,GAAW,OAAO,WAAc,IAAsCC,EAExDnB,EAAM/B,EAFgBmD,EAAQC,EAAgBH,GAAkB,GAMpG,WAAuC,GAAuB,oBAAZI,UAA4BA,QAAQC,UAAW,OAAc,GAAID,QAAQC,UAAUC,KAAM,OAAc,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAK1C,UAAU2C,SAAS1D,KAAKqD,QAAQC,UAAUG,KAAM,GAAI,eAAyB,EAAQ,MAAOvE,GAAK,QAN3MyE,GAA6B,CAAE,IAAIC,EAAYR,EAAgBpB,MAAMlB,YAAaoC,EAASG,QAAQC,UAAUH,EAAOjB,UAAW0B,QAAqBV,EAASC,EAAMhB,MAAMH,KAAME,WAAc,OAEjQH,EAFmSC,OAE7RhC,EAFmSkD,IAE5P,WAAlBvC,EAAQX,IAAsC,mBAATA,EAEpG,SAAgC+B,GAAQ,QAAa,IAATA,EAA4G,OAAOA,EAAhG,MAAM,IAAI8B,eAAe,6DAF0DC,CAAuB/B,GAAtC/B,GAMnI,SAASoD,EAAgB/D,GAAwJ,OAAnJ+D,EAAkBhD,OAAO0C,eAAiB1C,OAAO2D,eAAiB,SAAyB1E,GAAK,OAAOA,EAAE0D,WAAa3C,OAAO2D,eAAe1E,KAA8BA,GAExM,IAAIqI,EAAwB,YAd5B,SAAmBzD,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIC,UAAU,sDAAyDF,EAASlD,UAAYX,OAAOgE,OAAOF,GAAcA,EAAWnD,UAAW,CAAED,YAAa,CAAER,MAAO2D,EAAUrB,UAAU,EAAMD,cAAc,KAAeuB,GAAYrB,EAAgBoB,EAAUC,GAejXG,CAAUqD,EA+GVlH,EAAU,YA7GV,IAnBoB8D,EAAaC,EAAYC,EA8FrCC,EApCAC,EA5BAC,EAXJC,EAAS5B,EAAa0E,GAE1B,SAASA,IAGP,OA5BJ,SAAyB7C,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCA0B5GW,CAAgB9C,KAAM0F,GAEf9C,EAAOzC,MAAMH,KAAME,WAuG5B,OA/HoBoC,EA2BPoD,GA3BoBnD,EA2BV,CAAC,CACtBjD,IAAK,gBACLhB,OACMqE,EAAiB9C,EAAgCkD,mBAAmBC,KAAK,SAASC,IACpF,OAAOF,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACTrD,KAAK6D,KAAK8B,cAAc,uBAEjC,KAAK,EACH3F,KAAK4F,WAAazC,EAAS0C,KAE7B,KAAK,EACL,IAAK,MACH,OAAO1C,EAASG,SAGrBL,EAASjD,SAGd,WACE,OAAO2C,EAAexC,MAAMH,KAAME,cAKrC,CACDZ,IAAK,kBACLhB,OACMoE,EAAmB7C,EAAgCkD,mBAAmBC,KAAK,SAASO,IACtF,IAAIuC,EAAYC,EAEhB,OAAOhD,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EACHyC,EAAa9F,KAAK6D,KAAMkC,EAAOD,EAAWC,KAAmBD,EAAWR,WACxES,EAAKC,KAAK,EAAG,IAAK,KAAM,KAAKC,OAAO,CAClCC,MAAO,UACPC,MAAO,IAETnG,KAAKoG,KAAOL,EAAKM,IAAIrG,KAAK4F,YAAYU,KAAK,IAAK,KAAKL,OAAO,CAC1DC,MAAO,UACPC,MAAO,IACNI,KAAK,eAAeC,OAAO,IAAK,KAEnCC,OAAOC,OAAS1G,KAAKoG,KAEvB,KAAK,EACL,IAAK,MACH,OAAOzC,EAAUL,SAGtBC,EAAUvD,SAGf,WACE,OAAO0C,EAAiBvC,MAAMH,KAAME,cAKvC,CACDZ,IAAK,iBACLhB,OACMmE,EAAkB5C,EAAgCkD,mBAAmBC,KAAK,SAASyB,IACrF,OAAO1B,mBAAmBG,KAAK,SAAmBwB,GAChD,OACE,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EACL,IAAK,MACH,OAAOqB,EAAUpB,SAGtBmB,MAGL,WACE,OAAOhC,EAAgBtC,MAAMH,KAAME,cAKtC,CACDZ,IAAK,cACLhB,MAAO,cAEN,CACDgB,IAAK,OACLhB,MAAO,SAAcqI,EAAOC,GAC1B,IAAIC,EAAc7G,KAAK6D,KACZgD,EAAYd,KACNc,EAAYvB,gBAzH2ChF,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GA+H3KkD,EA/GmB,GAkH5B3H,EAAiB,QAAI2H,GAEnB,CAACF,cAAc,IAAIsB,EAAE,CAAC,SAASrJ,EAAQU,EAAOJ,GAChD,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAErB,IAAIS,EAAYuI,EAAuBtJ,EAAQ,gBAE3CuJ,EAAiBD,EAAuBtJ,EAAQ,qBAEpD,SAASsJ,EAAuBxI,GAAO,OAAOA,GAAOA,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASI,EAAQJ,GAAmV,OAAtOI,EAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBN,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXK,QAAyBL,EAAIO,cAAgBF,QAAUL,IAAQK,OAAOG,UAAY,gBAAkBR,IAAyBA,GAEnX,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAIjX,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAM7S,SAASI,EAAgBxD,EAAGS,GAA+G,OAA1G+C,EAAkBzC,OAAO0C,gBAAkB,SAAyBzD,EAAGS,GAAsB,OAAjBT,EAAE0D,UAAYjD,EAAUT,IAA6BA,EAAGS,GAErK,SAASkD,EAAaC,GAAW,OAAO,WAAc,IAAsCC,EAExDnB,EAAM/B,EAFgBmD,EAAQC,EAAgBH,GAAkB,GAMpG,WAAuC,GAAuB,oBAAZI,UAA4BA,QAAQC,UAAW,OAAc,GAAID,QAAQC,UAAUC,KAAM,OAAc,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAK1C,UAAU2C,SAAS1D,KAAKqD,QAAQC,UAAUG,KAAM,GAAI,eAAyB,EAAQ,MAAOvE,GAAK,QAN3MyE,GAA6B,CAAE,IAAIC,EAAYR,EAAgBpB,MAAMlB,YAAaoC,EAASG,QAAQC,UAAUH,EAAOjB,UAAW0B,QAAqBV,EAASC,EAAMhB,MAAMH,KAAME,WAAc,OAEjQH,EAFmSC,OAE7RhC,EAFmSkD,IAE5P,WAAlBvC,EAAQX,IAAsC,mBAATA,EAEpG,SAAgC+B,GAAQ,QAAa,IAATA,EAA4G,OAAOA,EAAhG,MAAM,IAAI8B,eAAe,6DAF0DC,CAAuB/B,GAAtC/B,GAMnI,SAASoD,EAAgB/D,GAAwJ,OAAnJ+D,EAAkBhD,OAAO0C,eAAiB1C,OAAO2D,eAAiB,SAAyB1E,GAAK,OAAOA,EAAE0D,WAAa3C,OAAO2D,eAAe1E,KAA8BA,GAExM,IAAI4J,EAAyB,YAd7B,SAAmBhF,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIC,UAAU,sDAAyDF,EAASlD,UAAYX,OAAOgE,OAAOF,GAAcA,EAAWnD,UAAW,CAAED,YAAa,CAAER,MAAO2D,EAAUrB,UAAU,EAAMD,cAAc,KAAeuB,GAAYrB,EAAgBoB,EAAUC,GAejXG,CAAU4E,EAwHVzI,EAAU,YAtHV,IAnBoB8D,EAAaC,EAAYC,EAqGrCC,EA1CAC,EA7BAC,EAXJC,EAAS5B,EAAaiG,GAE1B,SAASA,IAGP,OA5BJ,SAAyBpE,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCA0B5GW,CAAgB9C,KAAMiH,GAEfrE,EAAOzC,MAAMH,KAAME,WAgH5B,OAxIoBoC,EA2BP2E,GA3BoB1E,EA2BT,CAAC,CACvBjD,IAAK,gBACLhB,OACMqE,EAAiB9C,EAAgCkD,mBAAmBC,KAAK,SAASC,IACpF,OAAOF,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACTrD,KAAK6D,KAAK8B,cAAc,+BAEjC,KAAK,EACH3F,KAAKkH,WAAa/D,EAAS0C,KAC3B7F,KAAKmH,KAAOnH,KAAKkH,WAAWE,QAAQ,YAEtC,KAAK,EACL,IAAK,MACH,OAAOjE,EAASG,SAGrBL,EAASjD,SAGd,WACE,OAAO2C,EAAexC,MAAMH,KAAME,cAKrC,CACDZ,IAAK,kBACLhB,OACMoE,EAAmB7C,EAAgCkD,mBAAmBC,KAAK,SAASO,IACtF,IAAIwC,EAAMsB,EACV,OAAOtE,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EACH0C,EAAO/F,KAAK6D,KAAKkC,MACjBsB,EAAeC,SAASC,cAAc,QACzBC,UAAUC,IAAI,WAAY,OAAQ,cAAe,gBAC9DJ,EAAaK,YAAcvD,UAAUC,KAAKhH,EAAE,kBAC5C4C,KAAK6D,KAAKC,QAAQ6D,OAAON,GACVtB,EAAKM,IAAIrG,KAAKkH,YAAYZ,KAAK,KAAM,KAAKL,OAAO,CAC9DC,MAAO,UACPC,MAAO,IACNI,KAAK,eAAeC,OAAO,IAAU,KAC3BoB,QAAQ,CACnBC,SAAU,MACT5B,OAAO,CACRC,MAAO,YAETlG,KAAK8H,UAAW,EAAId,EAAwB,SAAGhH,KAAKkH,WAAY,CAC9DW,SAAU,OAEZ7H,KAAK+H,YAAc,EAErB,KAAK,EACL,IAAK,MACH,OAAOpE,EAAUL,SAGtBC,EAAUvD,SAGf,WACE,OAAO0C,EAAiBvC,MAAMH,KAAME,cAKvC,CACDZ,IAAK,iBACLhB,OACMmE,EAAkB5C,EAAgCkD,mBAAmBC,KAAK,SAASyB,IACrF,OAAO1B,mBAAmBG,KAAK,SAAmBwB,GAChD,OACE,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EACL,IAAK,MACH,OAAOqB,EAAUpB,SAGtBmB,MAGL,WACE,OAAOhC,EAAgBtC,MAAMH,KAAME,cAKtC,CACDZ,IAAK,cACLhB,MAAO,SAAqBqG,EAAOC,GAE7BD,EAAMG,KAAK,SAAUC,EAAMzH,GAC7B,OAAOyH,EAAKM,SAAWT,EAAUtH,GAAG+H,UAEpCrF,KAAKuF,aAAa,UAGrB,CACDjG,IAAK,OACLhB,MAAO,SAAcqI,EAAOC,GAC1B5G,KAAK8H,SAASnB,EAAOC,QApImDtG,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GAwI3KyE,EAxHoB,GA2H7BlJ,EAAiB,QAAIkJ,GAEnB,CAACzB,cAAc,EAAEwC,mBAAmB,IAAIC,EAAE,CAAC,SAASxK,EAAQU,EAAOJ,GACrE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAErB,IAEgCQ,EAF5B2J,GAE4B3J,EAFKd,EAAQ,YAEQc,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAIjX,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAS7S,IAAI0H,EAAwB,WAM1B,SAASA,EAAStE,IAjBpB,SAAyBhB,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCAkB5GW,CAAgB9C,KAAMmI,GAGtBnI,KAAK6D,KAAOA,EACZ7D,KAAKoI,OAAS,IAAIF,EAAiB,QAlBvC,IAAsB5F,EAAaC,EAAYC,EAwFrCC,EA5BAC,EA7BAC,EAuHR,OAtJoBL,EA4BP6F,GA5BoB5F,EA4BV,CAAC,CACtBjD,IAAK,gBACLhB,OACMqE,EAAiB9C,EAAgCkD,mBAAmBC,KAAK,SAASC,IACpF,OAAOF,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACL,IAAK,MACH,OAAOF,EAASG,SAGrBL,MAGL,WACE,OAAON,EAAexC,MAAMH,KAAME,cAarC,CACDZ,IAAK,kBACLhB,OACMoE,EAAmB7C,EAAgCkD,mBAAmBC,KAAK,SAASO,IACtF,OAAOR,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EACL,IAAK,MACH,OAAOM,EAAUL,SAGtBC,MAGL,WACE,OAAOb,EAAiBvC,MAAMH,KAAME,cAYvC,CACDZ,IAAK,iBACLhB,OACMmE,EAAkB5C,EAAgCkD,mBAAmBC,KAAK,SAASyB,IACrF,OAAO1B,mBAAmBG,KAAK,SAAmBwB,GAChD,OACE,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EACL,IAAK,MACH,OAAOqB,EAAUpB,SAGtBmB,MAGL,WACE,OAAOhC,EAAgBtC,MAAMH,KAAME,cAmBtC,CACDZ,IAAK,cACLhB,MAAO,cAUN,CACDgB,IAAK,OACLhB,MAAO,cASN,CACDgB,IAAK,eACLhB,MAAO,SAAsB+J,GAC3BrI,KAAKoI,OAAOE,KAAKD,QAlJuD/H,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GAsJ3K2F,EA/ImB,GAkJ5BpK,EAAiB,QAAIoK,GAEnB,CAACC,OAAS,IAAIG,EAAE,CAAC,SAAS9K,EAAQU,EAAOJ,GAC3C,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAErB,IAAIyK,EAAgBzB,EAAuBtJ,EAAQ,qBAE/CgL,EAAiB1B,EAAuBtJ,EAAQ,sBAEhDiL,EAAsB3B,EAAuBtJ,EAAQ,2BAErDkL,EAAkB5B,EAAuBtJ,EAAQ,sBAErD,SAASsJ,EAAuBxI,GAAO,OAAOA,GAAOA,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAIjX,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAa7S,IAAImI,EAAmC,WACrC,SAASA,EAAoBC,EAAW9E,IAhB1C,SAAyBlB,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCAiB5GW,CAAgB9C,KAAM4I,GAEtB5I,KAAK6I,UAAYA,EACjB7I,KAAK+D,OAASA,EACd/D,KAAK2E,MAAQ,GACb3E,KAAK8I,UAAY,GACjB9I,KAAK+I,YACL/I,KAAKgJ,UAAW,EAChBhJ,KAAKiJ,MAAQ,GACbjJ,KAAKkJ,YAAc,KACnBlJ,KAAKmJ,eAAiB,KACtBnJ,KAAKoJ,kBAAoB,KACzBpJ,KAAKsF,WAAatF,KAAK+D,OAAON,WAzBlC,IAAsBnB,EAAaC,EAAYC,EAqVrC6G,EAlCAC,EA7LAC,EAjFAC,EA+XR,OApaoBlH,EAkCPsG,GAlCoBrG,EAkCC,CAAC,CACjCjD,IAAK,OACLhB,OACMkL,EAAQ3J,EAAgCkD,mBAAmBC,KAAK,SAASC,IAC3E,OAAOF,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAoBH,OAnBArD,KAAKyJ,OAASC,MAAMC,MAAM3J,KAAK6I,WAAWvC,KAAK,IAAK,KACpDtG,KAAK+F,KAAO/F,KAAKyJ,OAAOG,SACxB5J,KAAK8D,QAAUwD,SAASC,cAAc,OACtCvH,KAAK8D,QAAQ0D,UAAUC,IAAI,WAC3BzH,KAAK6I,UAAUlB,OAAO3H,KAAK8D,SAEvB9D,KAAK+D,OAAO8F,oBACd7J,KAAKmJ,eAAiB,IAAIR,EAAyB,QAAE3I,KAAK+D,OAAON,YACjEzD,KAAK6I,UAAUiB,YAAY9J,KAAKmJ,eAAeY,UAG7C/J,KAAK+D,OAAOiG,gBACdhK,KAAKoJ,kBAAoB9B,SAASC,cAAc,OAChDvH,KAAKoJ,kBAAkB5B,UAAUC,IAAI,cACrCzH,KAAKoJ,kBAAkB5B,UAAUC,IAAI,uBACrCzH,KAAK6I,UAAUiB,YAAY9J,KAAKoJ,oBAGlCjG,EAASE,KAAO,EACTrD,KAAKiK,aAAa,QAAS,IAAIxB,EAAwB,QAAEzI,OAElE,KAAK,EAEH,OADAmD,EAASE,KAAO,GACTrD,KAAKiK,aAAa,aAAc,IAAIvB,EAA6B,QAAE1I,OAE5E,KAAK,GAEH,OADAmD,EAASE,KAAO,GACTrD,KAAKiK,aAAa,OAAQ,IAAIzB,EAAuB,QAAExI,OAEhE,KAAK,GACH,GAAKA,KAAK+D,OAAOmG,eAOjB,OAFAlK,KAAKmK,WAAW,OAAQ,OAAQ,QAChChH,EAASE,KAAO,GACTrD,KAAKoK,QAAQ,QANlBjH,EAASE,KAAO,GAChB,MAOJ,KAAK,GACHF,EAASE,KAAO,GAChB,MAEF,KAAK,GAKH,OAJArD,KAAKmK,WAAW,QAAS,OAAiC,EAAzBnK,KAAK+D,OAAON,WAAiB,aAAe,QAC7EzD,KAAKmK,WAAW,aAAc,OAAQ,QACtCnK,KAAKmK,WAAW,OAAQ,OAAQ,SAChChH,EAASE,KAAO,GACTrD,KAAKoK,QAAQ,SAEtB,KAAK,GACL,IAAK,MACH,OAAOjH,EAASG,SAGrBL,EAASjD,SAGd,WACE,OAAOwJ,EAAMrJ,MAAMH,KAAME,cAc5B,CACDZ,IAAK,gBACLhB,OACMiL,EAAiB1J,EAAgCkD,mBAAmBC,KAAK,SAASO,EAAS8G,GAC7F,IAAIC,EACAC,EACAC,EACAC,EAASvK,UACb,OAAO6C,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EAGH,OAFAiH,IAA8B,EAAhBG,EAAOxM,aAA4BoC,IAAdoK,EAAO,KAAmBA,EAAO,GACpE9G,EAAUN,KAAO,EACVqH,MAAML,GAEf,KAAK,EAGH,IAFAE,EAAW5G,EAAUkC,MAEN8E,OAAS,KAA0B,KAAnBJ,EAASI,OAKxC,MAAM,IAAI/M,MAAM,0BAA0B2G,OAAOgG,EAASI,OAAQ,MAAMpG,OAAOgG,EAASK,WAAY,cAAcrG,OAAO8F,EAAK,MAJ5H1G,EAAUN,KAAO,EACjB,MAKJ,KAAK,EAGH,OAFAM,EAAUkH,GAAK7K,KAAKyJ,OAAOqB,SAC3BnH,EAAUN,KAAO,EACVkH,EAASrG,OAElB,KAAK,EAUH,OATAP,EAAUoH,GAAKpH,EAAUkC,KACzB2E,EAAY7G,EAAUkH,GAAGG,IAAIhN,KAAK2F,EAAUkH,GAAIlH,EAAUoH,IAEtDT,GACFE,EAAU1F,KAAK,SAASmG,QAAQ,SAAUC,GACxCA,EAAEC,WAICxH,EAAUyH,OAAO,SAAUZ,GAEpC,KAAK,GACL,IAAK,MACH,OAAO7G,EAAUL,SAGtBC,EAAUvD,SAGf,SAAuBqL,GACrB,OAAO9B,EAAepJ,MAAMH,KAAME,cAWrC,CACDZ,IAAK,YACLhB,MAAO,WACL0B,KAAK2E,MAAQ2G,MAAMtL,KAAK+D,OAAON,YAAY8C,KAAK,MAAMgF,IAAI,WACxD,MAAO,CACLvG,UAAW,EACXK,QAAQ,OAab,CACD/F,IAAK,YACLhB,MAAO,WACL,IAAIkN,EAAQxL,KAEZA,KAAK8I,UAAY9I,KAAK2E,MACtB3E,KAAK+I,YAED/I,KAAKmJ,gBACPnJ,KAAKmJ,eAAesC,WAAWR,QAAQ,SAAUlG,EAAMzH,GACjDyH,EAAK2G,OACPF,EAAM7G,MAAMrH,GAAG0H,WAAa,GAG1BD,EAAK4G,QACPH,EAAM7G,MAAMrH,GAAG0H,UAAY,GAG7BwG,EAAM7G,MAAMrH,GAAG+H,OAASmG,EAAM7G,MAAMrH,GAAG+H,QAAUN,EAAKM,SAItDrF,KAAK+D,OAAO6H,aACdN,MAAMO,KAAKC,UAAUC,eAAed,QAAQ,SAAUe,EAAI1O,GAC7C,OAAP0O,IACEA,EAAGC,KAAK,IAAM,KAChBT,EAAM7G,MAAMrH,GAAG0H,WAAa,GAGb,GAAbgH,EAAGC,KAAK,KACVT,EAAM7G,MAAMrH,GAAG0H,UAAY,GAG7BwG,EAAM7G,MAAMrH,GAAG+H,OAASmG,EAAM7G,MAAMrH,GAAG+H,QAAU2G,EAAGE,QAAQ,GAAGC,SAAWH,EAAGE,QAAQ,GAAGC,WAK1FnM,KAAKoJ,oBACPpJ,KAAKoJ,kBAAkB1B,YAAc1H,KAAK2E,MAAM4G,IAAI,SAAUxG,EAAMzH,GAClE,MAAO,IAAIiH,OAAOjH,EAAG,QAAQiH,OAAOQ,EAAKC,UAAW,OAAOT,OAAOQ,EAAKM,OAAS,IAAM,OACrF+G,KAAK,WAOX,CACD9M,IAAK,MACLhB,MAAO,WACL,IAAI+N,EAASrM,KAETsM,EAAS,EAgBb7F,OAAO8F,sBAbQ,SAASC,EAAS5F,GAC1ByF,EAAOrD,WACVqD,EAAOI,YAEPJ,EAAOnD,YAAYwD,YAAYL,EAAO1H,MAAO0H,EAAOvD,WAEpDuD,EAAOnD,YAAYnD,KAAKd,KAAKE,IAAIyB,EAAK0F,EAR1B,KAQ8C1F,GAE1D0F,EAAS1F,EACTH,OAAO8F,sBAAsBC,QAYlC,CACDlN,IAAK,QACLhB,MAAO,WACL0B,KAAKgJ,UAAW,IAQjB,CACD1J,IAAK,SACLhB,MAAO,WACD0B,KAAKgJ,WACPhJ,KAAKgJ,UAAW,EAChBhJ,KAAK2M,SAcR,CACDrN,IAAK,eACLhB,OACMgL,EAAgBzJ,EAAgCkD,mBAAmBC,KAAK,SAASyB,EAASmI,EAAIC,GAChG,OAAO9J,mBAAmBG,KAAK,SAAmBwB,GAChD,OACE,OAAQA,EAAUtB,KAAOsB,EAAUrB,MACjC,KAAK,EAGH,OAFArD,KAAKiJ,MAAM2D,GAAMC,EACjBnI,EAAUrB,KAAO,EACVwJ,EAAKC,gBAEd,KAAK,EACL,IAAK,MACH,OAAOpI,EAAUpB,SAGtBmB,EAAUzE,SAGf,SAAsB+M,EAAKC,GACzB,OAAO1D,EAAcnJ,MAAMH,KAAME,cAapC,CACDZ,IAAK,UACLhB,OACM+K,EAAWxJ,EAAgCkD,mBAAmBC,KAAK,SAASiK,EAASC,GACvF,OAAOnK,mBAAmBG,KAAK,SAAmBiK,GAChD,OACE,OAAQA,EAAU/J,KAAO+J,EAAU9J,MACjC,KAAK,EAGH,GAFArD,KAAKoN,QAEApN,KAAKkJ,YAMV,OADAiE,EAAU9J,KAAO,EACVrD,KAAKkJ,YAAYmE,iBALtBF,EAAU9J,KAAO,EACjB,MAMJ,KAAK,EACH,QAA6BhD,IAAvBL,KAAKiJ,MAAMiE,GAKjB,MAAM,IAAItP,MAAM,gCAAgC2G,OAAO2I,IAJrDC,EAAU9J,KAAO,EACjB,MAKJ,KAAK,EAKH,OAJArD,KAAKkJ,YAAclJ,KAAKiJ,MAAMiE,GAC9BlN,KAAK+F,KAAKuH,QACVtN,KAAK8D,QAAQyJ,UAAY,GACzBJ,EAAU9J,KAAO,GACVrD,KAAKkJ,YAAYsE,kBAE1B,KAAK,GACHxN,KAAKyN,SAEP,KAAK,GACL,IAAK,MACH,OAAON,EAAU7J,SAGtB2J,EAAUjN,SAGf,SAAiB0N,GACf,OAAOrE,EAASlJ,MAAMH,KAAME,cAK/B,CACDZ,IAAK,aACLhB,MAAO,SAAoBqP,EAAQC,EAA5B,EAAA,GACL,IAAIC,EAAS7N,KAET8N,EAAgC,EAAnB5N,UAAUjC,aAA+BoC,IAHrD,EAAA,EAGgF,KACjF0N,EAA8B,EAAnB7N,UAAUjC,aAA+BoC,IAJnD,EAAA,EAI8E,KAEnF,QAA2BA,IAAvBL,KAAKiJ,MAAM0E,GACb,MAAM,IAAI/P,MAAM,mDAAmD2G,OAAOoJ,EAAQ,MAGpF,GAAIG,QAAyCzN,IAA3BL,KAAKiJ,MAAM6E,GAC3B,MAAM,IAAIlQ,MAAM,iDAAiD2G,OAAOuJ,EAAY,MAGtF9N,KAAKiJ,MAAM0E,GAAQvF,OAAO4F,GAAGJ,EAAO,WAClC,GAAIC,EAAO3E,cAAgB2E,EAAO5E,MAAM0E,GACtC,MAAM,IAAI/P,MAAM,QAAQ2G,OAAOoJ,EAAQ,yBAAyBpJ,OAAOqJ,EAAO,qDAG7D,OAAfE,GACFD,EAAOzD,QAAQ0D,GAGbC,GAAgC,mBAAbA,GACrBA,WA9ZoEzN,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GAoa3KoG,EAzZ8B,GA4ZvC7K,EAAiB,QAAI6K,GAEnB,CAACqF,yBAAyB,EAAEC,mBAAmB,EAAEC,oBAAoB,EAAEC,oBAAoB,IAAIC,EAAE,CAAC,SAAS5Q,EAAQU,EAAOJ,GAC5H,aAEA,IAEgCQ,EAF5B+P,GAE4B/P,EAFGd,EAAQ,YAEUc,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,SAASS,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GAAO,IAAM,IAAIC,EAAOP,EAAIK,GAAKC,GAAUjB,EAAQkB,EAAKlB,MAAS,MAAOmB,GAAwB,YAAfN,EAAOM,GAAsBD,EAAKE,KAAQR,EAAQZ,GAAiBqB,QAAQT,QAAQZ,GAAOsB,KAAKR,EAAOC,GAE7P,SAASQ,EAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOC,UAAW,OAAO,IAAIP,QAAQ,SAAUT,EAASC,GAAU,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GAAO,SAASb,EAAMd,GAASU,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQf,GAAU,SAASe,EAAOe,GAAOpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,GAAQhB,OAAMiB,MAEjX,IAmEMkO,EAnEFC,EAAgB,CAClBC,gBAAiB,KACjB7C,aAAa,EACb/B,mBAAmB,EACnBpG,WAAY,EACZyG,gBAAgB,EAChBF,eAAe,GASjB,SAAS0E,IACP,OAAOC,EAAYxO,MAAMH,KAAME,WAOjC,SAASyO,IAwCP,OAvCAA,EAAc9O,EAAgCkD,mBAAmBC,KAAK,SAASO,EAAS8G,GACtF,IAAIE,EACJ,OAAOxH,mBAAmBG,KAAK,SAAmBS,GAChD,OACE,OAAQA,EAAUP,KAAOO,EAAUN,MACjC,KAAK,EAEH,OADAM,EAAUN,KAAO,EACVqH,MAAML,GAEf,KAAK,EAGH,GAAyB,MAFzBE,EAAW5G,EAAUkC,MAEN8E,QAAiBJ,EAASI,OAAS,IAOlD,OAFAhH,EAAUP,KAAO,EACjBO,EAAUN,KAAO,EACVkH,EAASqE,OANdjL,EAAUN,KAAO,GACjB,MAOJ,KAAK,EACH,OAAOM,EAAUyH,OAAO,SAAUzH,EAAUkC,MAE9C,KAAK,GAGH,MAFAlC,EAAUP,KAAO,GACjBO,EAAUkH,GAAKlH,EAAiB,MAAE,GAC5B,IAAI/F,MAAM,8BAA8B2G,OAAOZ,EAAUkH,GAAGgE,UAEpE,KAAK,GACH,MAAM,IAAIjR,MAAM,0BAA0B2G,OAAOgG,EAASI,OAAQ,MAAMpG,OAAOgG,EAASK,WAAY,2BAEtG,KAAK,GACL,IAAK,MACH,OAAOjH,EAAUL,SAGtBC,EAAU,KAAM,CAAC,CAAC,EAAG,UAEPpD,MAAMH,KAAME,WAI3BqO,EAAQ1O,EAAgCkD,mBAAmBC,KAAK,SAASC,IAC3E,IAAIc,EAAQF,EACZ,OAAOd,mBAAmBG,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAMH,OALAF,EAASC,KAAO,EAChBD,EAAS0H,GAAKzM,OACd+E,EAAS4H,GAAK,GACd5H,EAAS2L,GAAKN,EACdrL,EAASE,KAAO,EACTqL,EAAW,iBAEpB,KAAK,EAIH,OAHAvL,EAAS4L,GAAK5L,EAAS0C,KACvB9B,EAASZ,EAAS0H,GAAGmE,OAAOhR,KAAKmF,EAAS0H,GAAI1H,EAAS4H,GAAI5H,EAAS2L,GAAI3L,EAAS4L,IACjF5L,EAASE,KAAO,GACTc,UAAUC,KAAK6K,KAAK,CACzBC,oBAAqB,OACrBC,sBAAuB,KACvBV,gBAAiB1K,EAAO0K,iBAAmB,OAG/C,KAAK,GAIH,OAFA5K,EAAO,IAAIyK,EAAe,QAAEhH,SAAS8H,cAAc,SAAUrL,GAC7DZ,EAASE,KAAO,GACTQ,EAAKoL,OAEd,KAAK,GACH9L,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASC,KAAO,GAChBD,EAASkM,GAAKlM,EAAgB,MAAE,GAEhCmM,QAAQ7P,MAAM0D,EAASkM,IAEzB,KAAK,GACL,IAAK,MACH,OAAOlM,EAASG,SAGrBL,EAAS,KAAM,CAAC,CAAC,EAAG,SAGzB,WACSsL,EAAMpO,MAAMH,KAAME,WAjD7B,IAuDE,CAACqP,SAAS,IAAIC,EAAE,CAAC,SAAS/R,EAAQU,EAAOJ,GAC3C,aASA,SAASuC,EAAkBC,EAAQC,GAAS,IAAK,IAAIlD,EAAI,EAAGA,EAAIkD,EAAMvC,OAAQX,IAAK,CAAE,IAAImD,EAAaD,EAAMlD,GAAImD,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxC,OAAOC,eAAekC,EAAQE,EAAWnB,IAAKmB,IAP7SrC,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,aAAI,EAcrB,IAAI0R,EAA8B,WAOhC,SAASA,EAAeC,GACtB,IAAIlE,EAAQxL,MApBhB,SAAyB6C,EAAUP,GAAe,KAAMO,aAAoBP,GAAgB,MAAM,IAAIH,UAAU,qCAsB5GW,CAAgB9C,KAAMyP,GAEtBzP,KAAK+J,QAAUzC,SAASC,cAAc,OACtCvH,KAAK+J,QAAQvC,UAAUC,IAAI,mBAC3BzH,KAAK+J,QAAQvC,UAAUC,IAAI,QAAQlD,OAAOmL,EAAO,cACjD1P,KAAK2P,MAAQ,GAEb,IAAK,IAAIrS,EAAI,EAAGA,EAAIoS,EAAOpS,GAAK,EAC9B0C,KAAK2P,MAAMC,KAAK,CACdlE,MAAM,EACNC,OAAO,EACPtG,QAAQ,IAEVrF,KAAK+J,QAAQD,YAAY9J,KAAK6P,aAAavS,IAI7C0C,KAAK8P,mBAAqB,KAC1BrJ,OAAOsJ,iBAAiB,UAAW,WACA,OAA7BvE,EAAMsE,qBACRtE,EAAMmE,MAAMnE,EAAMsE,mBAAmBlD,IAAIpB,EAAMsE,mBAAmBzH,OAAQ,EAE1EmD,EAAMsE,mBAAmB/F,QAAQvC,UAAU2D,OAAO,UAElDK,EAAMsE,mBAAqB,QA1CnC,IAAsBxN,EAAaC,EAAYC,EAkI7C,OAlIoBF,EAwDPmN,GAxDoBlN,EAwDJ,CAAC,CAC5BjD,IAAK,eACLhB,MAAO,SAAsBsO,GAC3B,IAAIP,EAASrM,KAETgQ,EAAO1I,SAASC,cAAc,OAClCyI,EAAKxI,UAAUC,IAAI,iBAAkB,kBAAkBlD,OAAOqI,IAE9C,SAAZqD,EAA+B5H,GACjC,IAAI6H,EAAS5I,SAASC,cAAc,UAIjB,SAAf4I,EAAqCC,GACT,EAA1BA,EAAGC,cAAcpS,QACnBoO,EAAOsD,MAAM/C,GAAIvE,IAAQ,EACzB6H,EAAO1I,UAAUC,IAAI,YAErB4E,EAAOsD,MAAM/C,GAAIvE,IAAQ,EACzB6H,EAAO1I,UAAU2D,OAAO,WAG1BiF,EAAGE,iBAwBL,OApCAJ,EAAOK,aAAa,OAAQ,UAC5BL,EAAO1I,UAAUC,IAAIY,GAcrB6H,EAAOH,iBAAiB,aAAcI,EAAc,CAClDK,SAAS,IAEXN,EAAOH,iBAAiB,YAAaI,EAAc,CACjDK,SAAS,IAEXN,EAAOH,iBAAiB,WAAYI,EAAc,CAChDK,SAAS,IAEXN,EAAOH,iBAAiB,cAAeI,EAAc,CACnDK,SAAS,IAEXN,EAAOH,iBAAiB,YAAa,WACnC1D,EAAOsD,MAAM/C,GAAIvE,IAAQ,EACzB6H,EAAO1I,UAAUC,IAAI,UACrB4E,EAAOyD,mBAAqB,CAC1BlD,GAAIA,EACJvE,KAAMA,EACN0B,QAASmG,KAGNA,EAMT,OAHAF,EAAKlG,YAAYmG,EAAU,SAC3BD,EAAKlG,YAAYmG,EAAU,WAC3BD,EAAKlG,YAAYmG,EAAU,UACpBD,IAeR,CACD1Q,IAAK,WACLhB,MAAO,WACL,OAAO0B,KAAK2P,WA9H4DrP,EAAkBgC,EAAYvD,UAAWwD,GAAiBC,GAAalC,EAAkBgC,EAAaE,GAkI3KiN,EA1HyB,GA6HlC1R,EAAiB,QAAI0R,GAEnB,IAAIgB,EAAE,CAAC,SAAShT,EAAQU,EAAOJ,GACjC,aAOA,SAAS2S,EAAeC,EAAKrT,GAAK,OAMlC,SAAyBqT,GAAO,GAAIrF,MAAMsF,QAAQD,GAAM,OAAOA,EANtBE,CAAgBF,IAIzD,SAA+BA,EAAKrT,GAAK,GAAsB,oBAAXsB,UAA4BA,OAAOC,YAAYT,OAAOuS,IAAO,OAAQ,IAAIG,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAK5Q,EAAW,IAAM,IAAK,IAAiC6Q,EAA7BC,EAAKR,EAAI/R,OAAOC,cAAmBkS,GAAMG,EAAKC,EAAG9N,QAAQ3D,QAAoBoR,EAAKlB,KAAKsB,EAAG5S,QAAYhB,GAAKwT,EAAK7S,SAAWX,GAA3DyT,GAAK,IAAoE,MAAO3Q,GAAO4Q,GAAK,EAAMC,EAAK7Q,EAAO,QAAU,IAAW2Q,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAAO,QAAU,GAAIH,EAAI,MAAMC,GAAQ,OAAOH,EAJjaM,CAAsBT,EAAKrT,IAAM+T,EAA4BV,EAAKrT,IAEnI,WAA8B,MAAM,IAAI6E,UAAU,6IAFuFmP,GAYzI,SAASD,EAA4BhU,EAAGkU,GAAU,GAAKlU,EAAL,CAAgB,GAAiB,iBAANA,EAAgB,OAAOmU,EAAkBnU,EAAGkU,GAAS,IAAIpU,EAAIiB,OAAOW,UAAU2C,SAAS1D,KAAKX,GAAGoU,MAAM,GAAI,GAAiE,MAAnD,WAANtU,GAAkBE,EAAEyB,cAAa3B,EAAIE,EAAEyB,YAAYuJ,MAAgB,QAANlL,GAAqB,QAANA,EAAoBmO,MAAMO,KAAK1O,GAAc,cAANA,GAAqB,2CAA2CuU,KAAKvU,GAAWqU,EAAkBnU,EAAGkU,QAAzG,GAM7S,SAASC,EAAkBb,EAAKgB,IAAkB,MAAPA,GAAeA,EAAMhB,EAAI1S,UAAQ0T,EAAMhB,EAAI1S,QAAQ,IAAK,IAAIX,EAAI,EAAGsU,EAAO,IAAItG,MAAMqG,GAAMrU,EAAIqU,EAAKrU,IAAOsU,EAAKtU,GAAKqT,EAAIrT,GAAM,OAAOsU,EAvBhLxT,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAETP,EAAiB,QA6CjB,SAAuB8T,GACrB,IAAIC,EAAiC,EAAnB5R,UAAUjC,aAA+BoC,IAAjBH,UAAU,GAAmBA,UAAU,GAAK,GAMlF6R,EAAU3T,OAAO4Q,OAAO,GALP,CACnBgD,WAAY,GACZnK,SAAU,IACVoK,OAAQ,GAEsCH,GAC5CI,EAAWL,EAAM/M,KAAK,WACtBqN,EAAgBD,EAAS3G,IAAI,SAAUzN,GACzC,OAAOA,EAAEsU,SAEPC,EAAOpN,KAAKC,IAAI/E,MAAM8E,KA/C5B,SAA4B0L,GAAO,OAQnC,SAA4BA,GAAO,GAAIrF,MAAMsF,QAAQD,GAAM,OAAOa,EAAkBb,GAR1C2B,CAAmB3B,IAM7D,SAA0B4B,GAAQ,GAAsB,oBAAX3T,QAA0BA,OAAOC,YAAYT,OAAOmU,GAAO,OAAOjH,MAAMO,KAAK0G,GANrDC,CAAiB7B,IAAQU,EAA4BV,IAE1H,WAAgC,MAAM,IAAIxO,UAAU,wIAF8EsQ,GA+ChGC,CAAmBP,EAAcQ,OAAOpH,IAAI,SAAUqH,GAIpF,OAHYlC,EAAekC,EAAM,GACnB,OAIZC,EAAU,EACd,OAAO,SAAUlM,EAAOC,GACtB,KAAIiM,EAAUd,EAAQlK,UAAtB,CAIAgL,GAAWlM,EACX,IAAImM,EAAW7N,KAAKE,IAAI0N,EAASd,EAAQlK,UAAYkK,EAAQlK,SAC7DqK,EAASjH,QAAQ,SAAUnN,EAAGR,GAC5BQ,EAAEsU,KAAKD,EAAc7U,GAAGiO,IAAI,SAAUwH,GACpC,IAAIC,EAAQtC,EAAeqC,EAAO,GAC9BE,EAAID,EAAM,GACVE,EAAIF,EAAM,GAEd,MAAO,CAACC,EAAIhO,KAAKkO,KAAKD,EAAIb,EAAOS,EAAWf,EAAQE,QAAUhN,KAAKmO,GAAK,GAAKrB,EAAQC,YAAc,EAAI/M,KAAKoO,IAAIP,EAAU,IAAKI,YAMrI,IAAII,EAAE,CAAC,SAAS7V,EAAQU,EAAOJ,GAsBjC,IAAIwV,EAAenV,OAAOgE,QAoe1B,SAA8BoR,GACpB,SAAJC,KAEJ,OADAA,EAAE1U,UAAYyU,EACP,IAAIC,GAteTC,EAAatV,OAAOuV,MAwexB,SAA4BpV,GAC1B,IAAIoV,EAAO,GACX,IAAK,IAAIC,KAAKrV,EAASH,OAAOW,UAAU8U,eAAe7V,KAAKO,EAAKqV,IAC/DD,EAAK/D,KAAKgE,GAEZ,OAAOA,GA5eLE,EAAOC,SAAShV,UAAU+U,MA8e9B,SAA8BE,GAC5B,IAAIlU,EAAKE,KACT,OAAO,WACL,OAAOF,EAAGK,MAAM6T,EAAS9T,aA/e7B,SAAS+T,IACFjU,KAAKkI,SAAY9J,OAAOW,UAAU8U,eAAe7V,KAAKgC,KAAM,aAC/DA,KAAKkI,QAAUqL,EAAa,MAC5BvT,KAAKkU,aAAe,GAGtBlU,KAAKmU,cAAgBnU,KAAKmU,oBAAiB9T,IAE7ClC,EAAOJ,QAAUkW,GAGJA,aAAeA,GAEflV,UAAUmJ,aAAU7H,EACjC4T,EAAalV,UAAUoV,mBAAgB9T,EAIvC,IAEI+T,EAFAC,EAAsB,GAG1B,IACE,IAAIhX,EAAI,GACJe,OAAOC,gBAAgBD,OAAOC,eAAehB,EAAG,IAAK,CAAEiB,MAAO,IAClE8V,EAA4B,IAAR/W,EAAE4V,EACtB,MAAO7S,GAAOgU,GAAoB,EA4BpC,SAASE,EAAiBC,GACxB,YAA2BlU,IAAvBkU,EAAKJ,cACAF,EAAaI,oBACfE,EAAKJ,cAyHd,SAASK,EAAajU,EAAQkU,EAAMC,EAAUC,GAC5C,IAAIC,EACAxM,EACAyM,EAEJ,GAAwB,mBAAbH,EACT,MAAM,IAAIvS,UAAU,0CAoBtB,IAlBAiG,EAAS7H,EAAO2H,UAOVE,EAAO0M,cACTvU,EAAO+H,KAAK,cAAemM,EACvBC,EAASA,SAAWA,EAASA,SAAWA,GAI5CtM,EAAS7H,EAAO2H,SAElB2M,EAAWzM,EAAOqM,KAblBrM,EAAS7H,EAAO2H,QAAUqL,EAAa,MACvChT,EAAO2T,aAAe,GAenBW,GAmBH,GAdwB,mBAAbA,EAETA,EAAWzM,EAAOqM,GACdE,EAAU,CAACD,EAAUG,GAAY,CAACA,EAAUH,GAG5CC,EACFE,EAASE,QAAQL,GAEjBG,EAASjF,KAAK8E,IAKbG,EAASG,SACZJ,EAAIN,EAAiB/T,KACR,EAAJqU,GAASC,EAAS5W,OAAS2W,EAAG,CACrCC,EAASG,QAAS,EAClB,IAAIC,EAAI,IAAIrX,MAAM,+CACdiX,EAAS5W,OAAS,KAAOiX,OAAOT,GAAQ,uEAG5CQ,EAAE5M,KAAO,8BACT4M,EAAEE,QAAU5U,EACZ0U,EAAER,KAAOA,EACTQ,EAAEvF,MAAQmF,EAAS5W,OACI,iBAAZqR,SAAwBA,QAAQ8F,MACzC9F,QAAQ8F,KAAK,SAAUH,EAAE5M,KAAM4M,EAAEpG,eA9BvCgG,EAAWzM,EAAOqM,GAAQC,IACxBnU,EAAO2T,aAmCX,OAAO3T,EAcT,SAAS8U,IACP,IAAKrV,KAAKsV,MAGR,OAFAtV,KAAKO,OAAOgV,eAAevV,KAAKyU,KAAMzU,KAAKwV,QAC3CxV,KAAKsV,OAAQ,EACLpV,UAAUjC,QAChB,KAAK,EACH,OAAO+B,KAAK0U,SAAS1W,KAAKgC,KAAKO,QACjC,KAAK,EACH,OAAOP,KAAK0U,SAAS1W,KAAKgC,KAAKO,OAAQL,UAAU,IACnD,KAAK,EACH,OAAOF,KAAK0U,SAAS1W,KAAKgC,KAAKO,OAAQL,UAAU,GAAIA,UAAU,IACjE,KAAK,EACH,OAAOF,KAAK0U,SAAS1W,KAAKgC,KAAKO,OAAQL,UAAU,GAAIA,UAAU,GAC3DA,UAAU,IAChB,QAEE,IADA,IAAID,EAAO,IAAIqL,MAAMpL,UAAUjC,QACtBX,EAAI,EAAGA,EAAI2C,EAAKhC,SAAUX,EACjC2C,EAAK3C,GAAK4C,UAAU5C,GACtB0C,KAAK0U,SAASvU,MAAMH,KAAKO,OAAQN,IAKzC,SAASwV,EAAUlV,EAAQkU,EAAMC,GAC/B,IAAI/E,EAAQ,CAAE2F,OAAO,EAAOE,YAAQnV,EAAWE,OAAQA,EAAQkU,KAAMA,EAAMC,SAAUA,GACjFgB,EAAU5B,EAAK9V,KAAKqX,EAAa1F,GAGrC,OAFA+F,EAAQhB,SAAWA,EACnB/E,EAAM6F,OAASE,EA2HjB,SAASC,EAAWpV,EAAQkU,EAAMmB,GAChC,IAAIxN,EAAS7H,EAAO2H,QAEpB,IAAKE,EACH,MAAO,GAET,IAAIyN,EAAazN,EAAOqM,GACxB,OAAKoB,EAGqB,mBAAfA,EACFD,EAAS,CAACC,EAAWnB,UAAYmB,GAAc,CAACA,GAElDD,EAsDT,SAAyBjF,GAEvB,IADA,IAAImF,EAAM,IAAIxK,MAAMqF,EAAI1S,QACfX,EAAI,EAAGA,EAAIwY,EAAI7X,SAAUX,EAChCwY,EAAIxY,GAAKqT,EAAIrT,GAAGoX,UAAY/D,EAAIrT,GAElC,OAAOwY,EA3DSC,CAAgBF,GAAcG,EAAWH,EAAYA,EAAW5X,QALvE,GAyBX,SAASgY,EAAcxB,GACrB,IAAIrM,EAASpI,KAAKkI,QAElB,GAAIE,EAAQ,CACV,IAAIyN,EAAazN,EAAOqM,GAExB,GAA0B,mBAAfoB,EACT,OAAO,EACF,GAAIA,EACT,OAAOA,EAAW5X,OAItB,OAAO,EAcT,SAAS+X,EAAWrF,EAAKxT,GAEvB,IADA,IAAI+Y,EAAO,IAAI5K,MAAMnO,GACZG,EAAI,EAAGA,EAAIH,IAAKG,EACvB4Y,EAAK5Y,GAAKqT,EAAIrT,GAChB,OAAO4Y,EA3bL9B,EACFhW,OAAOC,eAAe4V,EAAc,sBAAuB,CACzDvT,YAAY,EACZyV,IAAK,WACH,OAAO9B,GAET+B,IAAK,SAAS7W,GAGZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKA,GAAQA,EAChD,MAAM,IAAI4C,UAAU,mDACtBkS,EAAsB9U,KAI1B0U,EAAaI,oBAAsBA,EAKrCJ,EAAalV,UAAUsX,gBAAkB,SAAyBlZ,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKmZ,MAAMnZ,GAC1C,MAAM,IAAIgF,UAAU,0CAEtB,OADAnC,KAAKmU,cAAgBhX,EACd6C,MASTiU,EAAalV,UAAUwX,gBAAkB,WACvC,OAAOjC,EAAiBtU,OA4D1BiU,EAAalV,UAAUuJ,KAAO,SAAcmM,EAAd,EAAA,EAAA,GAC5B,IAAI+B,EAAIC,EAAS9E,EAAK1R,EAAM3C,EAAG8K,EAC3BsO,EAAoB,UAATjC,EAGf,GADArM,EAASpI,KAAKkI,QAEZwO,EAAWA,GAA2B,MAAhBtO,EAAO3I,WAC1B,IAAKiX,EACR,OAAO,EAGT,GAAIA,EAAS,CAGX,GAFuB,EAAnBxW,UAAUjC,SACZuY,EAbwB,GActBA,aAAc5Y,MAChB,MAAM4Y,EAGN,IAAIpW,EAAM,IAAIxC,MAAM,6BAA+B4Y,EAAK,KAExD,MADApW,EAAI4T,QAAUwC,EACRpW,EAOV,KAFAqW,EAAUrO,EAAOqM,IAGf,OAAO,EAET,IAAIkC,EAA0B,mBAAZF,EAElB,OADA9E,EAAMzR,UAAUjC,QAGd,KAAK,GAtFT,SAAkBwY,EAASE,EAAM5W,GAC/B,GAAI4W,EACFF,EAAQzY,KAAK+B,QAIb,IAFA,IAAI4R,EAAM8E,EAAQxY,OACd2Y,EAAYZ,EAAWS,EAAS9E,GAC3BrU,EAAI,EAAGA,EAAIqU,IAAOrU,EACzBsZ,EAAUtZ,GAAGU,KAAK+B,GAgFlB8W,CAASJ,EAASE,EAAM3W,MACxB,MACF,KAAK,GA/ET,SAAiByW,EAASE,EAAM5W,EAAM+W,GACpC,GAAIH,EACFF,EAAQzY,KAAK+B,EAAM+W,QAInB,IAFA,IAAInF,EAAM8E,EAAQxY,OACd2Y,EAAYZ,EAAWS,EAAS9E,GAC3BrU,EAAI,EAAGA,EAAIqU,IAAOrU,EACzBsZ,EAAUtZ,GAAGU,KAAK+B,EAAM+W,GAyExBC,CAAQN,EAASE,EAAM3W,KAtCC,GAuCxB,MACF,KAAK,GAxET,SAAiByW,EAASE,EAAM5W,EAAM+W,EAAME,GAC1C,GAAIL,EACFF,EAAQzY,KAAK+B,EAAM+W,EAAME,QAIzB,IAFA,IAAIrF,EAAM8E,EAAQxY,OACd2Y,EAAYZ,EAAWS,EAAS9E,GAC3BrU,EAAI,EAAGA,EAAIqU,IAAOrU,EACzBsZ,EAAUtZ,GAAGU,KAAK+B,EAAM+W,EAAME,GAkE9BC,CAAQR,EAASE,EAAM3W,KAzCC,EAAA,GA0CxB,MACF,KAAK,GAjET,SAAmByW,EAASE,EAAM5W,EAAM+W,EAAME,EAAME,GAClD,GAAIP,EACFF,EAAQzY,KAAK+B,EAAM+W,EAAME,EAAME,QAI/B,IAFA,IAAIvF,EAAM8E,EAAQxY,OACd2Y,EAAYZ,EAAWS,EAAS9E,GAC3BrU,EAAI,EAAGA,EAAIqU,IAAOrU,EACzBsZ,EAAUtZ,GAAGU,KAAK+B,EAAM+W,EAAME,EAAME,GA2DpCC,CAAUV,EAASE,EAAM3W,KA5CD,EAAA,EAAA,GA6CxB,MAEF,QAEE,IADAC,EAAO,IAAIqL,MAAMqG,EAAM,GAClBrU,EAAI,EAAGA,EAAIqU,EAAKrU,IACnB2C,EAAK3C,EAAI,GAAK4C,UAAU5C,IA7DhC,SAAkBmZ,EAASE,EAAM5W,EAAME,GACrC,GAAI0W,EACFF,EAAQtW,MAAMJ,EAAME,QAIpB,IAFA,IAAI0R,EAAM8E,EAAQxY,OACd2Y,EAAYZ,EAAWS,EAAS9E,GAC3BrU,EAAI,EAAGA,EAAIqU,IAAOrU,EACzBsZ,EAAUtZ,GAAG6C,MAAMJ,EAAME,GAuDzBmX,CAASX,EAASE,EAAM3W,KAAMC,GAGlC,OAAO,GA0ETgU,EAAalV,UAAUiP,GAJvBiG,EAAalV,UAAUsY,YAAc,SAAqB5C,EAAMC,GAC9D,OAAOF,EAAaxU,KAAMyU,EAAMC,GAAU,IAK5CT,EAAalV,UAAUuY,gBACnB,SAAyB7C,EAAMC,GAC7B,OAAOF,EAAaxU,KAAMyU,EAAMC,GAAU,IAkChDT,EAAalV,UAAUwY,KAAO,SAAc9C,EAAMC,GAChD,GAAwB,mBAAbA,EACT,MAAM,IAAIvS,UAAU,0CAEtB,OADAnC,KAAKgO,GAAGyG,EAAMgB,EAAUzV,KAAMyU,EAAMC,IAC7B1U,MAGTiU,EAAalV,UAAUyY,oBACnB,SAA6B/C,EAAMC,GACjC,GAAwB,mBAAbA,EACT,MAAM,IAAIvS,UAAU,0CAEtB,OADAnC,KAAKsX,gBAAgB7C,EAAMgB,EAAUzV,KAAMyU,EAAMC,IAC1C1U,MAIbiU,EAAalV,UAAUwW,eACnB,SAAwBd,EAAMC,GAC5B,IAAI+C,EAAMrP,EAAQsP,EAAUpa,EAAGqa,EAE/B,GAAwB,mBAAbjD,EACT,MAAM,IAAIvS,UAAU,0CAGtB,KADAiG,EAASpI,KAAKkI,SAEZ,OAAOlI,KAGT,KADAyX,EAAOrP,EAAOqM,IAEZ,OAAOzU,KAET,GAAIyX,IAAS/C,GAAY+C,EAAK/C,WAAaA,EACb,KAAtB1U,KAAKkU,aACTlU,KAAKkI,QAAUqL,EAAa,cAErBnL,EAAOqM,GACVrM,EAAOmN,gBACTvV,KAAKsI,KAAK,iBAAkBmM,EAAMgD,EAAK/C,UAAYA,SAElD,GAAoB,mBAAT+C,EAAqB,CAGrC,IAFAC,GAAY,EAEPpa,EAAIma,EAAKxZ,OAAS,EAAQ,GAALX,EAAQA,IAChC,GAAIma,EAAKna,KAAOoX,GAAY+C,EAAKna,GAAGoX,WAAaA,EAAU,CACzDiD,EAAmBF,EAAKna,GAAGoX,SAC3BgD,EAAWpa,EACX,MAIJ,GAAIoa,EAAW,EACb,OAAO1X,KAEQ,IAAb0X,EACFD,EAAKG,QAuHf,SAAmBH,EAAMI,GACvB,IAAK,IAAIva,EAAIua,EAAOjE,EAAItW,EAAI,EAAGH,EAAIsa,EAAKxZ,OAAQ2V,EAAIzW,EAAGG,GAAK,EAAGsW,GAAK,EAClE6D,EAAKna,GAAKma,EAAK7D,GACjB6D,EAAKK,MAxHGC,CAAUN,EAAMC,GAEE,IAAhBD,EAAKxZ,SACPmK,EAAOqM,GAAQgD,EAAK,IAElBrP,EAAOmN,gBACTvV,KAAKsI,KAAK,iBAAkBmM,EAAMkD,GAAoBjD,GAG1D,OAAO1U,MAGbiU,EAAalV,UAAUiZ,mBACnB,SAA4BvD,GAC1B,IAAImC,EAAWxO,EAAQ9K,EAGvB,KADA8K,EAASpI,KAAKkI,SAEZ,OAAOlI,KAGT,IAAKoI,EAAOmN,eAUV,OATyB,IAArBrV,UAAUjC,QACZ+B,KAAKkI,QAAUqL,EAAa,MAC5BvT,KAAKkU,aAAe,GACX9L,EAAOqM,KACY,KAAtBzU,KAAKkU,aACTlU,KAAKkI,QAAUqL,EAAa,aAErBnL,EAAOqM,IAEXzU,KAIT,GAAyB,IAArBE,UAAUjC,OAAc,CAC1B,IACIqB,EADAqU,EAAOD,EAAWtL,GAEtB,IAAK9K,EAAI,EAAGA,EAAIqW,EAAK1V,SAAUX,EAEjB,oBADZgC,EAAMqU,EAAKrW,KAEX0C,KAAKgY,mBAAmB1Y,GAK1B,OAHAU,KAAKgY,mBAAmB,kBACxBhY,KAAKkI,QAAUqL,EAAa,MAC5BvT,KAAKkU,aAAe,EACblU,KAKT,GAAyB,mBAFzB4W,EAAYxO,EAAOqM,IAGjBzU,KAAKuV,eAAed,EAAMmC,QACrB,GAAIA,EAET,IAAKtZ,EAAIsZ,EAAU3Y,OAAS,EAAQ,GAALX,EAAQA,IACrC0C,KAAKuV,eAAed,EAAMmC,EAAUtZ,IAIxC,OAAO0C,MAmBbiU,EAAalV,UAAU6X,UAAY,SAAmBnC,GACpD,OAAOkB,EAAW3V,KAAMyU,GAAM,IAGhCR,EAAalV,UAAUkZ,aAAe,SAAsBxD,GAC1D,OAAOkB,EAAW3V,KAAMyU,GAAM,IAGhCR,EAAagC,cAAgB,SAASd,EAASV,GAC7C,MAAqC,mBAA1BU,EAAQc,cACVd,EAAQc,cAAcxB,GAEtBwB,EAAcjY,KAAKmX,EAASV,IAIvCR,EAAalV,UAAUkX,cAAgBA,EAiBvChC,EAAalV,UAAUmZ,WAAa,WAClC,OAA2B,EAApBlY,KAAKkU,aAAmB7S,QAAQ8W,QAAQnY,KAAKkI,SAAW,KA4C/D,KAAK,GAAG,CAAC"}